<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Visualisation using ggplot2 | NERC DTP Visualisation Workshop</title>
  <meta name="description" content="1 Visualisation using ggplot2 | NERC DTP Visualisation Workshop—Lecture Notes" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Visualisation using ggplot2 | NERC DTP Visualisation Workshop" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="1 Visualisation using ggplot2 | NERC DTP Visualisation Workshop—Lecture Notes" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Visualisation using ggplot2 | NERC DTP Visualisation Workshop" />
  
  <meta name="twitter:description" content="1 Visualisation using ggplot2 | NERC DTP Visualisation Workshop—Lecture Notes" />
  

<meta name="author" content="TJ McKinley" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<script language="javascript"> 
    function toggle(id) {
        var ele = document.getElementById("toggleText" + id);
        var text = document.getElementById("displayText" + id);
        var buttonText = text.innerHTML.replace("Show: ", "");
        buttonText = buttonText.replace("Hide: ", "");
        if(ele.style.display == "block") {
            ele.style.display = "none";
            text.innerHTML = "Show: " + buttonText;
        } else {
            ele.style.display = "block";
            text.innerHTML = "Hide: " + buttonText;
        }
    } 
</script>

<script language="javascript">
    function openCode(evt, codeName, id) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent" + id);
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks" + id);
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(codeName).style.display = "block";
        evt.currentTarget.className += " active";
    }
</script>

<script language="javascript">
    function hide(id){
        document.getElementById(id).style.display = "none";
    }
</script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="https://www.exeter.ac.uk/"><img src="_colour_logo_vector.svg" width="280"></a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#recommended-reading"><i class="fa fa-check"></i>Recommended reading</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#structure-of-this-workshop"><i class="fa fa-check"></i>Structure of this workshop</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#tasks"><i class="fa fa-check"></i>Tasks</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="advis.html"><a href="advis.html"><i class="fa fa-check"></i><b>1</b> Visualisation using <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="1.1" data-path="advis.html"><a href="advis.html#introduction-to-tidyverse"><i class="fa fa-check"></i><b>1.1</b> Introduction to <code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="" data-path="advis.html"><a href="advis.html#tidyverse-packages"><i class="fa fa-check"></i><code>tidyverse</code> packages</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="advis.html"><a href="advis.html#gapminder"><i class="fa fa-check"></i><b>1.2</b> Gapminder</a></li>
<li class="chapter" data-level="1.3" data-path="advis.html"><a href="advis.html#introduction-to-ggplot2"><i class="fa fa-check"></i><b>1.3</b> Introduction to <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="advis.html"><a href="advis.html#geoms"><i class="fa fa-check"></i><b>1.3.1</b> Geoms</a></li>
<li class="chapter" data-level="1.3.2" data-path="advis.html"><a href="advis.html#aesthetics"><i class="fa fa-check"></i><b>1.3.2</b> Aesthetics</a></li>
<li class="chapter" data-level="1.3.3" data-path="advis.html"><a href="advis.html#building-up-plots"><i class="fa fa-check"></i><b>1.3.3</b> Building up plots</a></li>
<li class="chapter" data-level="1.3.4" data-path="advis.html"><a href="advis.html#labels-and-titles"><i class="fa fa-check"></i><b>1.3.4</b> Labels and titles</a></li>
<li class="chapter" data-level="1.3.5" data-path="advis.html"><a href="advis.html#aside-aesthetics-vs.-generic-options"><i class="fa fa-check"></i><b>1.3.5</b> <strong>Aside</strong>: aesthetics vs. generic options</a></li>
<li class="chapter" data-level="1.3.6" data-path="advis.html"><a href="advis.html#faceting"><i class="fa fa-check"></i><b>1.3.6</b> Faceting</a></li>
<li class="chapter" data-level="1.3.7" data-path="advis.html"><a href="advis.html#statistical-transformations"><i class="fa fa-check"></i><b>1.3.7</b> Statistical transformations</a></li>
<li class="chapter" data-level="1.3.8" data-path="advis.html"><a href="advis.html#aside-global-vs.-local-options"><i class="fa fa-check"></i><b>1.3.8</b> <strong>Aside</strong>: “global” vs. “local” options</a></li>
<li class="chapter" data-level="1.3.9" data-path="advis.html"><a href="advis.html#scales"><i class="fa fa-check"></i><b>1.3.9</b> Scales</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="advis.html"><a href="advis.html#a-more-complex-example-gapminder"><i class="fa fa-check"></i><b>1.4</b> A more complex example: Gapminder</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="advis.html"><a href="advis.html#gdp-against-life-expectancy"><i class="fa fa-check"></i><b>1.4.1</b> GDP against life expectancy</a></li>
<li class="chapter" data-level="1.4.2" data-path="advis.html"><a href="advis.html#gdp-per-continent"><i class="fa fa-check"></i><b>1.4.2</b> GDP per continent</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="advis.html"><a href="advis.html#saving-plots"><i class="fa fa-check"></i><b>1.5</b> Saving plots</a></li>
<li class="chapter" data-level="1.6" data-path="advis.html"><a href="advis.html#additional-task"><i class="fa fa-check"></i><b>1.6</b> Additional task</a></li>
<li class="chapter" data-level="1.7" data-path="advis.html"><a href="advis.html#additional-functionality-going-beyond-static-plots"><i class="fa fa-check"></i><b>1.7</b> Additional functionality: going beyond static plots</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NERC DTP Visualisation Workshop</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="advis" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">1</span> Visualisation using <code>ggplot2</code><a href="advis.html#advis" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Note
</div>
<div class="panel-body">
<p>A PDF handout for the slides for this part of the module can be found <a href="https://tjmckinley.github.io/NERC_DTP_visualisation/advis/uploadFiles/advisHANDOUT.pdf">here</a>. A PDF version of the slides (not in handout form) and a HTML version (which should be compatible with screen-readers) can also be found via the links <a href="https://tjmckinley.github.io/NERC_DTP_visualisation/advis/uploadFiles/advisSLIDES.pdf">here</a> and <a href="https://tjmckinley.github.io/NERC_DTP_visualisation/advis/uploadFiles/advisSLIDES.html">here</a>.</p>
All required data files can be downloaded from <a href="https://tjmckinley.github.io/NERC_DTP_visualisation/advis/uploadFiles/datasets_advis.zip">here</a>.
</div>
</div>
<div id="introduction-to-tidyverse" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Introduction to <code>tidyverse</code><a href="advis.html#introduction-to-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that you’re comfortable with R, and specifically with the concept of <code>data.frame</code> objects, we can begin to really start unlocking the power of R for analysing complex data sets. The ability to work with and visualise data frames is one of the key reasons why R is so popular among statisticians and data scientists. Although a vast amount can be achieved using base R functionality, one of R’s other key strengths is the vast array of <a href="https://cran.r-project.org/web/packages/">packages</a> that it supports, which add a rich variety of additional functionality to R.</p>
<p>A suite of packages that are fast becoming <em>de rigueur</em> for performing myriad data science tasks is known as the <a href="https://www.tidyverse.org/"><code>tidyverse</code></a>. These packages provide powerful functions for doing visualisation and manipulation of complex data sets. In this workshop we will introduce key <code>tidyverse</code> packages, and show how they can be used to efficiently process and visualise complex data sets.</p>
<div id="tidyverse-packages" class="section level3 unnumbered hasAnchor">
<h3><code>tidyverse</code> packages<a href="advis.html#tidyverse-packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <a href="https://www.tidyverse.org/"><code>tidyverse</code></a> is a suite of packages, including e.g. <code>tidyr</code>, <code>dplyr</code>, <code>ggplot2</code>, <code>purrr</code>, <code>tibble</code> and <code>readr</code>. Although these packages can each be installed and loaded separately, they are designed to work together, and as such will simply install and load the <code>tidyverse</code> directly, rather than worry too much about which functions belong to which packages.</p>
<p>As usual, if you want to install <code>tidyverse</code>, use:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="advis.html#cb3-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>and once installed, it can be loaded using:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="advis.html#cb4-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>in the usual way. Let’s start with a motivating example.</p>
</div>
</div>
<div id="gapminder" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Gapminder<a href="advis.html#gapminder" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://en.wikipedia.org/wiki/Hans_Rosling">Professor Hans Rosling</a> has made a name for himself in the field of data visualisation with his groundbreaking <a href="https://www.gapminder.org/">Gapminder</a> project.</p>
<iframe src="https://www.youtube.com/embed/jbkSRLYSojo" width="100%" height="400px" data-external="1">
</iframe>
<p>For a slightly longer presentation, his TED talk on global development has been watched over 11 million times. If you have 20 minutes, it can be found <a href="https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen?utm_source=tedcomshare&amp;utm_medium=referral&amp;utm_campaign=tedspread">here</a>, and is well worth a watch!</p>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Info
</div>
<div class="panel-body">
Professor Rosling sadly passed away on 7th February 2017, aged 68. I hope you will find some time to explore the <a href="https://www.gapminder.org/">Gapminder</a> website, and appreciate the immense contribution that he made to the world of public health and education. He presented a world-view based on facts and data. To this end he provided innovative and fascinating ways to explore and understand data, disseminated these findings with pathos and humour, and used this information to challenge many of our pre-conceptions about public health and the developing world. An obituary from the Guardian can be found <a href="https://www.theguardian.com/global-development/2017/feb/07/hans-rosling-obituary">here</a>.
</div>
</div>
<p>The <a href="https://www.gapminder.org/">Gapminder</a> website provides really informative interactive visualisations for many fascinating data sets. In this practical we will explore how to use R to try to recreate something similar to the types of visualisation that Gapminder provides, and see how high-end R packages—such as <code>ggplot2</code>—have been developed that provide a systematic and flexible way to generate complex plots / visualisations. Our aim for this workshop is to emulate the plot in Figure <a href="advis.html#fig:gapminder">1.1</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:gapminder"></span>
<img src="advis/images/gapminder.png" alt="Life expectancy against GDP---screenshot from Gapminder project" width="70%" height="70%" />
<p class="caption">
Figure 1.1: Life expectancy against GDP—screenshot from Gapminder project
</p>
</div>
</div>
<div id="introduction-to-ggplot2" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Introduction to <code>ggplot2</code><a href="advis.html#introduction-to-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R has very powerful and flexible plotting capabilities, that can be used to produce high-quality, bespoke visualisations. The downside is that the syntax can be verbose, so for complex plots it can be time consuming to code up.</p>
<p>A general package that has been developed for visualisation of complex data sets is called <a href="https://ggplot2.tidyverse.org/"><code>ggplot2</code></a>. This provides a wide variety of standard plot types and flexible customisation options, with a unifying syntax. In this part of the module, we will introduce <code>ggplot2</code> and illustrate its use on a range of real-world examples.</p>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Note
</div>
<div class="panel-body">
We will not focus on using R’s base graphics capabilities here, but will provide some comparison code for some of the examples (if you are interested) in order to show you how you can generate similar plots without <code>ggplot2</code>.
</div>
</div>
<p>We will introduce some example code first, and then talk through it. First we load the <code>tidyverse</code> (of which <code>ggplot2</code> is included—you could just load <code>ggplot2</code> if you prefer).</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="advis.html#cb5-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>Let’s begin by exploring the <code>iris</code> data set, which gives the measurements in centimeters of the variables sepal length and width, and petal length and width, respectively, for 50 flowers from each of 3 species of iris. The species are <em>Iris setosa</em>, <em>versicolor</em>, and <em>virginica</em>. This data set is available as part of the base R package. Let’s have a look at the data:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="advis.html#cb6-1" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>You’ll notice that the data is in <strong>tidy</strong> format. Specifically, a <strong>tidy</strong> data set is one in which:</p>
<ul>
<li>rows contain different <strong>observations</strong>;</li>
<li>columns contain different <strong>variables</strong>;</li>
<li>cells contain values.</li>
</ul>
<p>We will discuss <strong>tidy</strong> data in more detail <a href="#wrangling">in a later section</a>. For the time being, as a quick example, let’s produce a plot of <code>Sepal.Width</code> against <code>Sepal.Length</code>, but with points coloured by <code>Species</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="advis.html#cb8-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb8-2"><a href="advis.html#cb8-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width, <span class="at">colour =</span> Species))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-16-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Notice that we had to do little physical manipulation of the plot. We didn’t have to choose how to position legends, or manually subset the data to plot the different points, or choose the colours; the package took care of all of these things.</p>
<p><infobutton id="displayTextunnamed-chunk-17" onclick="javascript:toggle('unnamed-chunk-17');">Show: Analogous base R code</infobutton></p>
<div id="toggleTextunnamed-chunk-17" style="display: none">
<div class="panel panel-default">
<div class="panel-body">
<p>Here is a version of the same plot using base R graphics functions, with some explanation of the different steps.</p>
<p>Firstly, plot the <code>iris$Sepal.Width</code> vector against the <code>iris$Sepal.Length</code> vector, adding some informative axis labels.
</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="advis.html#cb9-1" tabindex="-1"></a><span class="do">## produce scatterplot</span></span>
<span id="cb9-2"><a href="advis.html#cb9-2" tabindex="-1"></a><span class="fu">plot</span>(iris<span class="sc">$</span>Sepal.Length, iris<span class="sc">$</span>Sepal.Width, </span>
<span id="cb9-3"><a href="advis.html#cb9-3" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Sepal Length (cm)&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Sepal Width (cm)&quot;</span>)</span></code></pre></div>
<p>Now we will use the <code>points()</code> function to overlay points on an existing plot, manually colouring by the different species.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="advis.html#cb10-1" tabindex="-1"></a><span class="fu">points</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span>],</span>
<span id="cb10-2"><a href="advis.html#cb10-2" tabindex="-1"></a>       iris<span class="sc">$</span>Sepal.Width[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span>], <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb10-3"><a href="advis.html#cb10-3" tabindex="-1"></a><span class="fu">points</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;virginica&quot;</span>],</span>
<span id="cb10-4"><a href="advis.html#cb10-4" tabindex="-1"></a>       iris<span class="sc">$</span>Sepal.Width[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;virginica&quot;</span>], <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p>Finally we add a legend. We could set the position of the legend manually, but the objects <code>par("usr")</code> provides the coordinates of the plot region in the form <code>c(x1, x2, y1, y2)</code>, where <code>x1</code> is the lower bound for the <span class="math inline">\(x\)</span>-axis, and <code>x2</code> is the upper bound for the <span class="math inline">\(x\)</span>-axis, and similarly for <code>y1</code> and <code>y2</code>. It is up to us to set the correct mapping of colours and point shapes to the text labels, and to figure out the optimum positioning. See the helps files: <code>?plot</code>, <code>?points</code> and <code>?legend</code> for more details.
</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="advis.html#cb11-1" tabindex="-1"></a><span class="do">## add legend</span></span>
<span id="cb11-2"><a href="advis.html#cb11-2" tabindex="-1"></a><span class="fu">legend</span>(<span class="fu">par</span>(<span class="st">&quot;usr&quot;</span>)[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">0.8</span>, <span class="fu">par</span>(<span class="st">&quot;usr&quot;</span>)[<span class="dv">4</span>] <span class="sc">*</span> <span class="fl">0.98</span>, </span>
<span id="cb11-3"><a href="advis.html#cb11-3" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">&quot;setosa&quot;</span>, <span class="st">&quot;versicolor&quot;</span>, <span class="st">&quot;virginica&quot;</span>), </span>
<span id="cb11-4"><a href="advis.html#cb11-4" tabindex="-1"></a>       <span class="at">pch =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), </span>
<span id="cb11-5"><a href="advis.html#cb11-5" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>))</span></code></pre></div>
The final plot looks like:
<img src="_main_files/figure-html/unnamed-chunk-94-1.png" width="50%" style="display: block; margin: auto;" />
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Note
</div>
<div class="panel-body">
As usual, information can be found in the relevant help files, but a really useful resource for <code>ggplot2</code> is the <a href="https://github.com/rstudio/cheatsheets/raw/main/data-visualization.pdf">Data Visualisation Cheat Sheet</a>. Another fantastic resource, is the <a href="https://r-graphics.org/">R Graphics Cookbook</a> by Winston Chang, which has a free online version, or a physical book that you can buy.
</div>
</div>
<p>So, how does it work? <code>ggplot2</code> is based on a book called the <a href="https://www.amazon.co.uk/Grammar-Graphics-Statistics-Computing/dp/0387245448">Grammar of Graphics</a> by <a href="https://en.wikipedia.org/wiki/Leland_Wilkinson">Leland Wilkinson</a>—hence the name <code>gg</code>-<code>plot</code>! The ethos of <code>ggplot2</code> is that plots can be broken down into different <strong>features</strong>, most notably:</p>
<ul>
<li><strong>data</strong>;</li>
<li><strong>aesthetic mapping</strong>;</li>
<li><strong>geometric object</strong>;</li>
<li><strong>scales</strong>;</li>
<li><strong>faceting</strong>;</li>
<li>statistical transformations;</li>
<li>coordinate system;</li>
<li>position adjustments.</li>
</ul>
<p>Perhaps the easiest way to explain some of these concepts is to work through our examples step-by-step. We will focus on the main components marked in <strong>bold</strong> above. Let’s start with the scatterplot example first, and examine the first part of the code:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="advis.html#cb12-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-19-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>This sets up the plot. The first argument to the <code>ggplot</code> function is the <strong>data</strong>, which here is the <code>iris</code> data set.</p>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Important
</div>
<div class="panel-body">
Whereas base R graphics can plot various object types, <code>ggplot()</code> <strong>requires</strong> <code>data.frame</code> (or <code>tibble</code><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>) objects. It is designed for plotting statistical data sets. Never fear, most R objects can be manipulated into <code>data.frames</code> for plotting if required. (See next session on <a href="#wrangling"><strong>data wrangling</strong></a> for more on this.)
</div>
</div>
<p>Notice that only an <strong>empty plot</strong> has been drawn so far, there are no points present. This is because we haven’t told <code>ggplot2</code> what type of plot we want. We do this by specifying a <strong>geom</strong>.</p>
<div id="geoms" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Geoms<a href="advis.html#geoms" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A <strong>geom</strong> defines the type of plot we want. In this case we want a <strong>scatterplot</strong>, which can be defined by the <code>geom_point()</code> function. Geoms can be layered, allowing us to built up complex plots sequentially. Common geoms are:</p>
<ul>
<li><code>geom_point()</code></li>
<li><code>geom_line()</code></li>
<li><code>geom_histogram()</code></li>
<li><code>geom_density()</code></li>
<li><code>geom_bar()</code></li>
<li><code>geom_violin()</code></li>
</ul>
<p>Please see the <a href="https://github.com/rstudio/cheatsheets/raw/main/data-visualization.pdf">Data Visualisation Cheat Sheet</a> for more examples.</p>
</div>
<div id="aesthetics" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Aesthetics<a href="advis.html#aesthetics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>aes(x = Sepal.Length, y = Sepal.Width, colour = Species)</code> part sets the <strong>aesthetics</strong>, which here are added as an argument to the <code>geom_point()</code> function. These define how the <em>data</em> are <strong>mapped</strong> onto the <em>visual aesthetics</em> of the plot. Here we are setting the <code>x</code> coordinates to be <code>Sepal.Length</code>, the <code>y</code> coordinates to be <code>Sepal.Width</code>, and the <code>colour</code> of the characters to be related to <code>Species</code>. In general, <strong>aesthetics</strong> include:</p>
<ul>
<li>position;</li>
<li>colour (border or line colour);</li>
<li>fill (inside colour);</li>
<li>shape;</li>
<li>linetype;</li>
<li>size.</li>
</ul>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Note
</div>
<div class="panel-body">
Notice that we did not have to use the <code>$</code> operator to extract columns. This makes <code>ggplot2</code> code a lot clearer. R knows to look for the <code>Sepal.Length</code> and <code>Sepal.Width</code> columns in the <code>iris</code> data, because we have told <code>ggplot()</code> which data set to operate on.
</div>
</div>
</div>
<div id="building-up-plots" class="section level3 hasAnchor" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Building up plots<a href="advis.html#building-up-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Note that <code>ggplot2</code> <strong>builds</strong> plots up by <em>adding</em> together components. There are lots of ways to do this. Here I have set up “global” options for the plot using the <code>ggplot()</code> function. I then <strong>add</strong> (<code>+</code>) to this the type of plot I want i.e. <code>+ geom_point(aes(x = Sepal.Length, y = Sepal.Width, colour = Species))</code> (in this case including the aesthetics in the <code>geom_*</code> call). The addition sign is important. If I want to split the function over multiple lines, make sure the <code>+</code> sign is at the <strong>end</strong> of each line, so R knows that the plot is not complete at the point.</p>
<div style="page-break-after: always;"></div>
<p>Putting all this together we have:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="advis.html#cb13-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb13-2"><a href="advis.html#cb13-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width, <span class="at">colour =</span> Species))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-22-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Nice! With one tiny function we have added colours <em>and</em> legends. All neatly formatted to work together in one plot!</p>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Important
</div>
<div class="panel-body">
Each type of <code>geom</code> accepts only a subset of all aesthetics. Information on these can be found in the help files for each <code>geom_*</code> type, or see also the <a href="https://github.com/rstudio/cheatsheets/raw/main/data-visualization.pdf">Data Visualisation Cheat Sheet</a>. Most of these are fairly obvious. For example, a scatterplot requires both <code>x</code> and <code>y</code> aesthetics as a minimum. A kernel density geom e.g. <code>geom_density()</code>, requires only an <code>x</code> aesthetic (we will come back to this shortly). Some aesthetics do not make sense for certain types of geom; for example, it makes sense that a <code>shape</code> aesthetic can be added to <code>geom_point()</code> but not to <code>geom_line()</code>. Conversely, adding a <code>linetype</code> aesthetic to <code>geom_line()</code> makes sense, but not to <code>geom_point()</code>.
</div>
</div>
</div>
<div id="labels-and-titles" class="section level3 hasAnchor" number="1.3.4">
<h3><span class="header-section-number">1.3.4</span> Labels and titles<a href="advis.html#labels-and-titles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Labels and titles can be added fairly easily, using the <code>xlab()</code>, <code>ylab()</code> and <code>ggtitle()</code> functions, e.g.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="advis.html#cb14-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb14-2"><a href="advis.html#cb14-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width, <span class="at">colour =</span> Species)) <span class="sc">+</span> </span>
<span id="cb14-3"><a href="advis.html#cb14-3" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Sepal Length (cm)&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Sepal Width (cm)&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-4"><a href="advis.html#cb14-4" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Scatterplot of sepal lengths and widths&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-24-1.png" width="50%" style="display: block; margin: auto;" /></p>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Assume that we want to visualise the distribution of <code>Sepal.Length</code> values for each species, together on one plot. One way that we can do this is to use a kernel density plot (or alternatively a histogram) of the data. Produce a plot containing three density plots for <code>Sepal.Length</code>, stratified by <code>Species</code>. <strong>Hint</strong>: use the <code>geom_density()</code> geom, which requires an <code>x</code> aesthetic only, and set the <code>colour</code> aesthetic as before.
</div>
</div>
<button id="displayTextunnamed-chunk-26" onclick="javascript:toggle(&#39;unnamed-chunk-26&#39;);">
Show: Solution
</button>
<div id="toggleTextunnamed-chunk-26" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="advis.html#cb15-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb15-2"><a href="advis.html#cb15-2" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">colour =</span> Species))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-95-1.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<p><infobutton id="displayTextunnamed-chunk-27" onclick="javascript:toggle('unnamed-chunk-27');">Show: Analogous base R code</infobutton></p>
<div id="toggleTextunnamed-chunk-27" style="display: none">
<div class="panel panel-default">
<div class="panel-body">
<p>Let’s start by visualising the variable <code>Sepal.Length</code> using a kernel density plot:
</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="advis.html#cb16-1" tabindex="-1"></a><span class="do">## kernel density of sepal length</span></span>
<span id="cb16-2"><a href="advis.html#cb16-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length))</span></code></pre></div>
<p>Remember that we can extract a named column from a <code>data.frame</code> using the <code>$</code> operator. The <code>density()</code> function is a simple function in R that takes a <code>vector</code> argument and returns a kernel density object, which we can then plot using the generic <code>plot()</code> function.</p>
<p>Now let’s try to plot different kernel density plots for the three different species. We could do this as separate plots, and use our standard subsetting notation to extract the correct elements of the data frame in each case:
</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="advis.html#cb17-1" tabindex="-1"></a><span class="do">## plot Sepal.Length for setosa</span></span>
<span id="cb17-2"><a href="advis.html#cb17-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>]))</span>
<span id="cb17-3"><a href="advis.html#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="advis.html#cb17-4" tabindex="-1"></a><span class="do">## plot Sepal.Length for versicolor</span></span>
<span id="cb17-5"><a href="advis.html#cb17-5" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span>]))</span>
<span id="cb17-6"><a href="advis.html#cb17-6" tabindex="-1"></a></span>
<span id="cb17-7"><a href="advis.html#cb17-7" tabindex="-1"></a><span class="do">## plot Sepal.Length for virginica</span></span>
<span id="cb17-8"><a href="advis.html#cb17-8" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;virginica&quot;</span>]))</span></code></pre></div>
<p>What about if we want to add all three density lines to the same plot?
</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="advis.html#cb18-1" tabindex="-1"></a><span class="do">## place kernel density estimates on the same plot</span></span>
<span id="cb18-2"><a href="advis.html#cb18-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>]), <span class="at">main =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb18-3"><a href="advis.html#cb18-3" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span>]))</span>
<span id="cb18-4"><a href="advis.html#cb18-4" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;virginica&quot;</span>]))</span></code></pre></div>
<p>Notice the use of the <code>lines()</code> function to allow a line to be added to an existing plot (in an analogous manner to the <code>points()</code> function used in the earlier scatterplot example).</p>
<p>Notice that the limits of the <span class="math inline">\(x\)</span>- and <span class="math inline">\(y\)</span>-axes in this case are set by the range of the initial <code>setosa</code> sepal lengths, and hence the density plots for the other two species extend beyond the plot window. Let’s try again, but this time setting the bounds for the plots manually. To do this we calculate the <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> ranges for each density plot separately, and then take the maximum values across the different species. We then use the <code>xlim</code> and <code>ylim</code> arguments to the <code>plot()</code> function in order to set the ranges:
</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="advis.html#cb19-1" tabindex="-1"></a><span class="do">## produce densities</span></span>
<span id="cb19-2"><a href="advis.html#cb19-2" tabindex="-1"></a>setosa_dens <span class="ot">&lt;-</span> <span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>])</span>
<span id="cb19-3"><a href="advis.html#cb19-3" tabindex="-1"></a>versicolor_dens <span class="ot">&lt;-</span> <span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span>])</span>
<span id="cb19-4"><a href="advis.html#cb19-4" tabindex="-1"></a>virginica_dens <span class="ot">&lt;-</span> <span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;virginica&quot;</span>])</span>
<span id="cb19-5"><a href="advis.html#cb19-5" tabindex="-1"></a></span>
<span id="cb19-6"><a href="advis.html#cb19-6" tabindex="-1"></a><span class="do">## extract x-ranges and y-ranges</span></span>
<span id="cb19-7"><a href="advis.html#cb19-7" tabindex="-1"></a>xlims <span class="ot">&lt;-</span> <span class="fu">range</span>(<span class="fu">c</span>(setosa_dens<span class="sc">$</span>x, versicolor_dens<span class="sc">$</span>x, virginica_dens<span class="sc">$</span>x))</span>
<span id="cb19-8"><a href="advis.html#cb19-8" tabindex="-1"></a>ylims <span class="ot">&lt;-</span> <span class="fu">range</span>(<span class="fu">c</span>(setosa_dens<span class="sc">$</span>y, versicolor_dens<span class="sc">$</span>y, virginica_dens<span class="sc">$</span>y))</span>
<span id="cb19-9"><a href="advis.html#cb19-9" tabindex="-1"></a></span>
<span id="cb19-10"><a href="advis.html#cb19-10" tabindex="-1"></a><span class="do">## produce plot</span></span>
<span id="cb19-11"><a href="advis.html#cb19-11" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>]), </span>
<span id="cb19-12"><a href="advis.html#cb19-12" tabindex="-1"></a>     <span class="at">xlim =</span> xlims, <span class="at">ylim =</span> ylims, <span class="at">main =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb19-13"><a href="advis.html#cb19-13" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span>]))</span>
<span id="cb19-14"><a href="advis.html#cb19-14" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;virginica&quot;</span>]))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-99-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>This is better, but still not very informative. Let’s add some colour and a legend, and tidy up the axis labels.
</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="advis.html#cb20-1" tabindex="-1"></a><span class="do">## produce plot</span></span>
<span id="cb20-2"><a href="advis.html#cb20-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;setosa&quot;</span>]), </span>
<span id="cb20-3"><a href="advis.html#cb20-3" tabindex="-1"></a>    <span class="at">xlim =</span> xlims, <span class="at">ylim =</span> ylims, <span class="at">main =</span> <span class="st">&quot;&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;Sepal Length (cm)&quot;</span>)</span>
<span id="cb20-4"><a href="advis.html#cb20-4" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;versicolor&quot;</span>]), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb20-5"><a href="advis.html#cb20-5" tabindex="-1"></a><span class="fu">lines</span>(<span class="fu">density</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species <span class="sc">==</span> <span class="st">&quot;virginica&quot;</span>]), <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb20-6"><a href="advis.html#cb20-6" tabindex="-1"></a></span>
<span id="cb20-7"><a href="advis.html#cb20-7" tabindex="-1"></a><span class="do">## add legend to top-right corner</span></span>
<span id="cb20-8"><a href="advis.html#cb20-8" tabindex="-1"></a><span class="fu">legend</span>(<span class="fu">par</span>(<span class="st">&quot;usr&quot;</span>)[<span class="dv">2</span>] <span class="sc">*</span> <span class="fl">0.8</span>, <span class="fu">par</span>(<span class="st">&quot;usr&quot;</span>)[<span class="dv">4</span>] <span class="sc">*</span> <span class="fl">0.95</span>, </span>
<span id="cb20-9"><a href="advis.html#cb20-9" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">&quot;setosa&quot;</span>, <span class="st">&quot;versicolor&quot;</span>, <span class="st">&quot;virginica&quot;</span>), </span>
<span id="cb20-10"><a href="advis.html#cb20-10" tabindex="-1"></a>       <span class="at">lty =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), </span>
<span id="cb20-11"><a href="advis.html#cb20-11" tabindex="-1"></a>       <span class="at">col =</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;blue&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-100-1.png" width="50%" style="display: block; margin: auto;" /></p>
Notice that this is quite a simple plot, but required a series of steps to render in base R. We needed to calculate manual limits for the axes, plot the three species separately, and then add a custom legend to the plot, none of which is necessary with <code>ggplot2</code>.
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Produce the same density plot, but replace the <code>colour</code> aesthetic with a <code>fill</code> aesthetic. What happens?
</div>
</div>
<button id="displayTextunnamed-chunk-29" onclick="javascript:toggle(&#39;unnamed-chunk-29&#39;);">
Show: Solution
</button>
<div id="toggleTextunnamed-chunk-29" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="advis.html#cb21-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb21-2"><a href="advis.html#cb21-2" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">fill =</span> Species))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-101-1.png" width="50%" style="display: block; margin: auto;" /></p>
We can see that now we have produced filled density plots. However, since these overlap each other, it is difficult to see the full shapes of these distributions.
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Now add an <code>alpha</code> channel to this plot. An <code>alpha</code> channel controls the degree of opacity for the colours, where <code>alpha = 0</code> corresponds to complete transparency, and <code>alpha = 1</code> to complete opacity. Note that we <strong>do not</strong> want to map the <code>alpha</code> channel to an aesthetic here, rather we want all fill colours to be, say 50% transparent. We can therefore add an <code>alpha = 0.5</code> argument to the <code>geom_density()</code> function. What happens?
</div>
</div>
<button id="displayTextunnamed-chunk-31" onclick="javascript:toggle(&#39;unnamed-chunk-31&#39;);">
Show: Solution
</button>
<div id="toggleTextunnamed-chunk-31" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="advis.html#cb22-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb22-2"><a href="advis.html#cb22-2" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">fill =</span> Species), <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-102-1.png" width="50%" style="display: block; margin: auto;" /></p>
Now we can better see the shapes of these distributions.
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Tidy up the labels and add a plot title to produce a final plot.
</div>
</div>
<button id="displayTextunnamed-chunk-33" onclick="javascript:toggle(&#39;unnamed-chunk-33&#39;);">
Show: Solution
</button>
<div id="toggleTextunnamed-chunk-33" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="advis.html#cb23-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb23-2"><a href="advis.html#cb23-2" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">fill =</span> Species), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb23-3"><a href="advis.html#cb23-3" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Sepal Length (cm)&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Density&quot;</span>) <span class="sc">+</span> </span>
<span id="cb23-4"><a href="advis.html#cb23-4" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Density plots of sepal length by species&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-103-1.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
</div>
<div id="aside-aesthetics-vs.-generic-options" class="section level3 hasAnchor" number="1.3.5">
<h3><span class="header-section-number">1.3.5</span> <strong>Aside</strong>: aesthetics vs. generic options<a href="advis.html#aside-aesthetics-vs.-generic-options" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As a quick aside, notice that when we set the <code>alpha</code> channel above, we did not set it as an aesthetic, rather we set it as a generic option which was applied to all components of the plot. Perhaps the easiest way to visualise this difference, is to consider different <code>colour</code> options. Take a look at these next pieces of code and try to understand the differences between them.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="advis.html#cb24-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb24-2"><a href="advis.html#cb24-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width, <span class="at">colour =</span> Species))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-34-1.png" width="50%" style="display: block; margin: auto;" /></p>
<div style="page-break-after: always;"></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="advis.html#cb25-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb25-2"><a href="advis.html#cb25-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width), <span class="at">colour =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-35-1.png" width="50%" style="display: block; margin: auto;" /></p>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
<p>What happens if you try to run the following code?</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="advis.html#cb26-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb26-2"><a href="advis.html#cb26-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width), <span class="at">colour =</span> Species)</span></code></pre></div>
Why does this happen?
</div>
</div>
<button id="displayTextunnamed-chunk-37" onclick="javascript:toggle(&#39;unnamed-chunk-37&#39;);">
Show: Solution
</button>
<div id="toggleTextunnamed-chunk-37" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<p>In this case you get an error:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="advis.html#cb27-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb27-2"><a href="advis.html#cb27-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width), <span class="at">colour =</span> Species)</span></code></pre></div>
<pre><code>## Error in list2(na.rm = na.rm, ...): object &#39;Species&#39; not found</code></pre>
This is because you are trying to set a generic <code>colour</code> using a vector object <code>Species</code>. Since the <code>colour</code> option is not part of the aesthetics, <code>ggplot()</code> does not know where to find <code>Species</code>.
</div>
</div>
</div>
</div>
<div id="faceting" class="section level3 hasAnchor" number="1.3.6">
<h3><span class="header-section-number">1.3.6</span> Faceting<a href="advis.html#faceting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another really useful feature of <code>ggplot</code> is the ability to use faceting to display sub-plots according to some grouping variable. For example, let’s assume that we want to produce separate plots of sepal length vs. width for each of the three species of iris. We can do this using faceting:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="advis.html#cb29-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb29-2"><a href="advis.html#cb29-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width)) <span class="sc">+</span></span>
<span id="cb29-3"><a href="advis.html#cb29-3" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> Species)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-38-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Neat eh? Note that we can also use different aesthetics within the facets. For example, we could also add a <code>colour</code> aesthetic e.g.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="advis.html#cb30-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb30-2"><a href="advis.html#cb30-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width, <span class="at">colour =</span> Species)) <span class="sc">+</span></span>
<span id="cb30-3"><a href="advis.html#cb30-3" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> Species)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-39-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>This doesn’t add anything more to the plot here since the colours are redundant. Later we will see a better example of this.</p>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Note
</div>
<div class="panel-body">
There is also a <code>facet_grid()</code> option that allows us to facet by more than one variable. Please see the <a href="https://github.com/rstudio/cheatsheets/raw/main/data-visualization.pdf">Data Visualisation Cheat Sheet</a> for more details.
</div>
</div>
</div>
<div id="statistical-transformations" class="section level3 hasAnchor" number="1.3.7">
<h3><span class="header-section-number">1.3.7</span> Statistical transformations<a href="advis.html#statistical-transformations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another feature of <code>ggplot2</code> is that we can layer transformations over the top of our raw data. For example, there is a <code>stat_smooth()</code> function that allows us to overlay a smoothed non-parametric line to a scatterplot. For example:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="advis.html#cb31-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb31-2"><a href="advis.html#cb31-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width)) <span class="sc">+</span></span>
<span id="cb31-3"><a href="advis.html#cb31-3" tabindex="-1"></a>    <span class="fu">stat_smooth</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-41-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Notice that this has added a <code>loess</code> smoothed line to the plot<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. We could instead add a linear line if we prefer, by setting a <code>method</code> argument to <code>stat_smooth</code> e.g.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="advis.html#cb33-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb33-2"><a href="advis.html#cb33-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width)) <span class="sc">+</span></span>
<span id="cb33-3"><a href="advis.html#cb33-3" tabindex="-1"></a>    <span class="fu">stat_smooth</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width), <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-42-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>With the addition of a single function we can now add different lines for each species:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="advis.html#cb35-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb35-2"><a href="advis.html#cb35-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width)) <span class="sc">+</span></span>
<span id="cb35-3"><a href="advis.html#cb35-3" tabindex="-1"></a>    <span class="fu">stat_smooth</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width), <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb35-4"><a href="advis.html#cb35-4" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> Species)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-43-1.png" width="50%" style="display: block; margin: auto;" /></p>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Aside
</div>
<div class="panel-body">
This is a neat example of <a href="https://en.wikipedia.org/wiki/Simpson%27s_paradox">Simpson’s Paradox</a>, which an apparent trend in the data disappears or reverses when the trend is explored in subsets of the data. (In this case the linear model suggested a negative correlation between sepal length and width when the species information was ignored, but a positive correlation within each species.)
</div>
</div>
</div>
<div id="aside-global-vs.-local-options" class="section level3 hasAnchor" number="1.3.8">
<h3><span class="header-section-number">1.3.8</span> <strong>Aside</strong>: “global” vs. “local” options<a href="advis.html#aside-global-vs.-local-options" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Notice that in the code below the <code>geom_point()</code> and <code>stat_smooth()</code> functions use the same aesthetics. In this case it is possible to add “global” aesthetics to a plot through the <code>ggplot2()</code> function, which can then be accessed by sub-functions. Hence the following two pieces of code are equivalent here.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="advis.html#cb37-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris) <span class="sc">+</span></span>
<span id="cb37-2"><a href="advis.html#cb37-2" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width)) <span class="sc">+</span></span>
<span id="cb37-3"><a href="advis.html#cb37-3" tabindex="-1"></a>    <span class="fu">stat_smooth</span>(<span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width), <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb37-4"><a href="advis.html#cb37-4" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> Species)</span></code></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="advis.html#cb38-1" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Sepal.Length, <span class="at">y =</span> Sepal.Width)) <span class="sc">+</span></span>
<span id="cb38-2"><a href="advis.html#cb38-2" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb38-3"><a href="advis.html#cb38-3" tabindex="-1"></a>    <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb38-4"><a href="advis.html#cb38-4" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> Species)</span></code></pre></div>
<p>Mixtures of “global” and “local” aesthetics can be used where necessary, which is particularly useful when layering information from different data sets onto the same plot.</p>
</div>
<div id="scales" class="section level3 hasAnchor" number="1.3.9">
<h3><span class="header-section-number">1.3.9</span> Scales<a href="advis.html#scales" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Scales control the details of how data values are translated to visual properties. These allow us to control translations from data to aesthetics. We will see some simple examples of these in due course.</p>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Note
</div>
<div class="panel-body">
<p>Some really useful colour palettes for categorical data in particular were designed by Cynthia Brewer and can be found through the colorbrewer website: <a href="https://colorbrewer2.org/">https://colorbrewer2.org/</a>. These provide a range of sequential, diverging and qualitative colour palettes, that can also be chosen to be colour-blind, print or photocopy friendly. <code>ggplot2</code> offers a <code>scales_*_brewer()</code> function that enables you to use these palettes for your own plots. More information can be found <a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">here</a>.</p>
A set of colour palettes with similar properties that make them colour-blind and print friendly, but have better support for continuous colour scales are the viridis palettes. Information can be found <a href="https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html">here</a>. The <a href="https://cran.r-project.org/web/packages/viridis/index.html"><code>viridis</code></a> package contains <code>ggplot2</code> bindings for these palettes, and more information on these can be found <a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">here</a>.
</div>
</div>
</div>
</div>
<div id="a-more-complex-example-gapminder" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> A more complex example: Gapminder<a href="advis.html#a-more-complex-example-gapminder" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s take these ideas and return to our Gapminder data. Datasets from the Gapminder project can be downloaded from <a href="https://www.gapminder.org/data">https://www.gapminder.org/data</a>. However, the particular data set required to replicate Figure <a href="advis.html#fig:gapminder">1.1</a> is available in a package in R called (naturally) <a href="https://cran.r-project.org/web/packages/gapminder/index.html"><code>gapminder</code></a>. If not already installed, then this can be installed in the usual way.</p>
<p>Firstly, load the package:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="advis.html#cb39-1" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span></code></pre></div>
<p>Have a quick look at the data, which are available as an object called <code>gapminder</code>:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="advis.html#cb40-1" tabindex="-1"></a>gapminder</span></code></pre></div>
<pre><code>## # A tibble: 1,704 × 6
##    country     continent  year lifeExp      pop gdpPercap
##    &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1 Afghanistan Asia       1952    28.8  8425333      779.
##  2 Afghanistan Asia       1957    30.3  9240934      821.
##  3 Afghanistan Asia       1962    32.0 10267083      853.
##  4 Afghanistan Asia       1967    34.0 11537966      836.
##  5 Afghanistan Asia       1972    36.1 13079460      740.
##  6 Afghanistan Asia       1977    38.4 14880372      786.
##  7 Afghanistan Asia       1982    39.9 12881816      978.
##  8 Afghanistan Asia       1987    40.8 13867957      852.
##  9 Afghanistan Asia       1992    41.7 16317921      649.
## 10 Afghanistan Asia       1997    41.8 22227415      635.
## # ℹ 1,694 more rows</code></pre>
<p>Here we can see that the data set consists of 1704 rows and 6 columns, and contains information on country, continent, life expectancy, population size, GDP (per capita) and year.</p>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Note
</div>
<div class="panel-body">
<p>Any R aficionados amongst you might notice the slightly strange <code>print</code> behaviour of the <code>gapminder</code> object. If we try to <code>print</code> a <code>data.frame</code> object to the screen, then it usually prints the whole object. Here it’s printed an attenuated version of the object. This is because the <code>gapminder</code> data set is saved as a <code>tibble</code> object, rather than a standard <code>data.frame</code>.</p>
<p><code>tibble</code> objects are simply enhanced data frames, which are generally easier to examine. For example, they force R to display only the data that fits onscreen. They also add some information about the class of each column. In fact, the <code>tibble</code> package—loaded as part of the <code>tidyverse</code>—introduces the <code>as_tibble()</code> function to convert ordinary <code>data.frame</code> objects to <code>tibble</code> objects, in case you want to use this functionality in future. Please see the <a href="https://github.com/rstudio/cheatsheets/raw/main/data-import.pdf">Data Import Cheat Sheet</a> for more information.</p>
<p>Note also that <code>tibble</code> objects seem to make a distinction between integers (<code>&lt;int&gt;</code>) and doubles (<code>&lt;dbl&gt;</code>), instead of just using <code>numeric</code>. R makes no such distinction in practice, and so you can think of either of these as simply <code>numeric</code> types.</p>
We’ll use <code>tibbles</code> more generally in the later <a href="#wrangling">data wrangling</a> session.
</div>
</div>
<p>Let’s just clarify the data:</p>
<ul>
<li><strong><code>country</code></strong>: country of interest (<code>factor</code>);</li>
<li><strong><code>continent</code></strong>: continent country can be found in (<code>factor</code>);</li>
<li><strong><code>year</code></strong>: year corresponding to data (in increments of 5 years) (<code>numeric</code>);</li>
<li><strong><code>lifeExp</code></strong>: life expectancy at birth (in years) (<code>numeric</code>);</li>
<li><strong><code>pop</code></strong>: population size (<code>numeric</code>);</li>
<li><strong><code>gdpPercap</code></strong>: GDP per capita, in dollars, by Purchasing Power Parities and adjusted for inflation (<code>numeric</code>).</li>
</ul>
<div id="gdp-against-life-expectancy" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> GDP against life expectancy<a href="advis.html#gdp-against-life-expectancy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s think about Figure <a href="advis.html#fig:gapminder">1.1</a> and try to map the various aesthetics in the plot to our data set. We have:</p>
<table>
<caption><span id="tab:gapaes">Table 1.1: </span> Aesthetics for gapminder plot</caption>
<thead>
<tr class="header">
<th align="center">Aesthetic</th>
<th align="center">Variable</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>x</code></td>
<td align="center"><code>gdpPercap</code></td>
</tr>
<tr class="even">
<td align="center"><code>y</code></td>
<td align="center"><code>lifeExp</code></td>
</tr>
<tr class="odd">
<td align="center"><code>colour</code></td>
<td align="center"><code>continent</code></td>
</tr>
<tr class="even">
<td align="center"><code>size</code></td>
<td align="center"><code>pop</code></td>
</tr>
</tbody>
</table>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Using <code>ggplot2</code>, produce a scatterplot that uses the aesthetics in Table <a href="advis.html#tab:gapaes">1.1</a> for just the year 1952.
</div>
</div>
<button id="displayTextunnamed-chunk-52" onclick="javascript:toggle(&#39;unnamed-chunk-52&#39;);">
Show: Solution
</button>
<div id="toggleTextunnamed-chunk-52" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="advis.html#cb42-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder[gapminder<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1952</span>, ], </span>
<span id="cb42-2"><a href="advis.html#cb42-2" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">size =</span> pop, <span class="at">colour =</span> continent)) <span class="sc">+</span></span>
<span id="cb42-3"><a href="advis.html#cb42-3" tabindex="-1"></a>    <span class="fu">geom_point</span>() </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-106-1.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<p>Notice how rich this plot is already. One thing to note is that in Figure <a href="advis.html#fig:gapminder">1.1</a> the <span class="math inline">\(x\)</span>-axis is plotted on the <span class="math inline">\(\log_{10}\)</span> scale. There are two ways in which we can handle this: either by transforming the <code>gdpPercap</code> variable directly, or by using an appropriate <code>scales_*</code> function. Here we want to apply a <span class="math inline">\(\log_{10}\)</span> transformation to the <code>x</code> aesthetic.</p>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
<ol style="list-style-type: decimal">
<li>Redo the previous plot but with the aesthetic <code>x = log10(gdpPercap)</code>.</li>
<li>Redo the previous plot with the aesthetic <code>x = gdpPercap</code> but with an additional <code>scale_x_log10()</code> layer.</li>
</ol>
How do these plots differ?
</div>
</div>
<button id="displayTextunnamed-chunk-54" onclick="javascript:toggle(&#39;unnamed-chunk-54&#39;);">
Show: Solution
</button>
<div id="toggleTextunnamed-chunk-54" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="advis.html#cb43-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder[gapminder<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1952</span>, ], </span>
<span id="cb43-2"><a href="advis.html#cb43-2" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">log10</span>(gdpPercap), <span class="at">y =</span> lifeExp, <span class="at">size =</span> pop, <span class="at">colour =</span> continent)) <span class="sc">+</span></span>
<span id="cb43-3"><a href="advis.html#cb43-3" tabindex="-1"></a>    <span class="fu">geom_point</span>() </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-107-1.png" width="50%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="advis.html#cb44-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder[gapminder<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1952</span>, ], </span>
<span id="cb44-2"><a href="advis.html#cb44-2" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">size =</span> pop, <span class="at">colour =</span> continent)) <span class="sc">+</span></span>
<span id="cb44-3"><a href="advis.html#cb44-3" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-108-1.png" width="50%" style="display: block; margin: auto;" /></p>
The plots differ purely in the labels for the <span class="math inline">\(x\)</span>-axis.
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Important
</div>
<div class="panel-body">
<p><code>ggplot2</code> also allows you to save the plot as an object, which can be updated at a later date or used within other functions. For example,</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="advis.html#cb45-1" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(gapminder[gapminder<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1952</span>, ], </span>
<span id="cb45-2"><a href="advis.html#cb45-2" tabindex="-1"></a>      <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">size =</span> pop, <span class="at">colour =</span> continent)) <span class="sc">+</span></span>
<span id="cb45-3"><a href="advis.html#cb45-3" tabindex="-1"></a>   <span class="fu">geom_point</span>()</span></code></pre></div>
<p>creates an object called <code>p</code> that contains the plot information. This will not be plotted until the object is <strong>printed</strong> to the screen e.g.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="advis.html#cb46-1" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-110-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p><strong>Note</strong>: If using <code>ggplot</code> inside functions you may have to explicitly use the <code>print()</code> function (e.g. <code>print(p)</code>).</p>
<p>This can be useful if we want to add things to an existing plot at a later stage without having to rewrite the entire plot. For example, to set the scales on plot <code>p</code> we can do:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="advis.html#cb47-1" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">scale_x_log10</span>()</span>
<span id="cb47-2"><a href="advis.html#cb47-2" tabindex="-1"></a>p</span></code></pre></div>
<img src="_main_files/figure-html/unnamed-chunk-111-1.png" width="50%" style="display: block; margin: auto;" />
</div>
</div>
<p><code>ggplot2</code> has lots of built in transformations e.g. <code>"log"</code>, <code>"exp"</code>, <code>"sqrt"</code>, <code>"log10"</code> and so on. Or you can define your own. Notice that we have not transformed the data, we have merely told <code>ggplot()</code> on what scale to plot it. This sorts out the axis tick labelling automatically.</p>
<p>We can also scale other aesthetics. For example, although the relative areas of the points are scaled nicely, we probably want the largest points to be slightly larger. Hence we can scale the area of the maximum point by using the <code>scale_size_area()</code> function:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="advis.html#cb48-1" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">10</span>)</span>
<span id="cb48-2"><a href="advis.html#cb48-2" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-56-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Again, labels and titles can be added fairly easily, using the <code>xlab()</code>, <code>ylab()</code> and <code>ggtitle()</code> functions:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="advis.html#cb49-1" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;log10(GDP per capita)&quot;</span>) <span class="sc">+</span></span>
<span id="cb49-2"><a href="advis.html#cb49-2" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Life expectancy at birth (years)&quot;</span>) <span class="sc">+</span></span>
<span id="cb49-3"><a href="advis.html#cb49-3" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;1952&quot;</span>)</span>
<span id="cb49-4"><a href="advis.html#cb49-4" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-57-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Changing the legend titles can also be done using the <code>labs()</code> option. Notice that the legends map to the aesthetics, so there is a <code>colour</code> legend that maps to the colour aesthetic, and a <code>size</code> legend that maps to the size aesthetic.)</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="advis.html#cb50-1" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">colour =</span> <span class="st">&quot;Continent&quot;</span>, <span class="at">size =</span> <span class="st">&quot;Population size&quot;</span>)</span>
<span id="cb50-2"><a href="advis.html#cb50-2" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-58-1.png" width="50%" style="display: block; margin: auto;" /></p>
<div style="page-break-after: always;"></div>
<p>Not bad. Finally notice that by default <code>ggplot2</code> uses a light-grey background. This seems to prove somewhat divisive. There is a solid theory behind choosing this as the default, since it provides clarity without having too much contrast. However, some people don’t like it, and so there are options to turn this off (using <code>theme()</code>). In this case we can simply turn this off using <code>theme_bw()</code> (a black-and-white theme).</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="advis.html#cb51-1" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme_bw</span>()</span>
<span id="cb51-2"><a href="advis.html#cb51-2" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-59-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>There are many, many possible options with <code>ggplot2</code>. Far too many to cover here. We can only really get a flavour of what can be achieved. I have often found Google to be invaluable for learning <code>ggplot2</code>.</p>
<p>Let’s have a look at a couple of other examples.</p>
</div>
<div id="gdp-per-continent" class="section level3 hasAnchor" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> GDP per continent<a href="advis.html#gdp-per-continent" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another chart that Professor Rosling used in an associated <a href="https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen?utm_source=tedcomshare&amp;utm_medium=referral&amp;utm_campaign=tedspread">TED talk</a> was a stacked density plot. This is a smoothed version of a <strong>histogram</strong>. Let’s start by looking at the distribution of GPD values across all countries in 1952. This can be done with the <code>geom_density()</code> geom as in the earlier example, which requires only an <code>x</code> aesthetic—see <code>?geom_density</code>—since it calculates the density on the <span class="math inline">\(y\)</span>-axis automatically from the data once we have chosen an appropriate bandwidth.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="advis.html#cb52-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder[gapminder<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1952</span>, ],</span>
<span id="cb52-2"><a href="advis.html#cb52-2" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap)) <span class="sc">+</span></span>
<span id="cb52-3"><a href="advis.html#cb52-3" tabindex="-1"></a>    <span class="fu">geom_density</span>() <span class="sc">+</span></span>
<span id="cb52-4"><a href="advis.html#cb52-4" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-60-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>This simple plot is producing a density plot of the distribution of GDP across <strong>all countries</strong> in 1952. How do split this by continent? Well, there are various ways. One way would be to set the <code>fill</code> aesthetic to map to the <code>continent</code> variable:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="advis.html#cb53-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminder[gapminder<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1952</span>, ],</span>
<span id="cb53-2"><a href="advis.html#cb53-2" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb53-3"><a href="advis.html#cb53-3" tabindex="-1"></a>    <span class="fu">geom_density</span>() <span class="sc">+</span></span>
<span id="cb53-4"><a href="advis.html#cb53-4" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-61-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>This produces an <strong>overlapped</strong> density plot by default. (The patterns are quite difficult to see here, due to the <code>Oceania</code> data, so for the purposes of exposition only we’re going to remove <code>Oceania</code> from the subsequent plots.)</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="advis.html#cb54-1" tabindex="-1"></a><span class="do">## remove Oceania (for exposition purposes only)</span></span>
<span id="cb54-2"><a href="advis.html#cb54-2" tabindex="-1"></a>gapminderNoOc <span class="ot">&lt;-</span> gapminder[gapminder<span class="sc">$</span>continent <span class="sc">!=</span> <span class="st">&quot;Oceania&quot;</span>, ]</span>
<span id="cb54-3"><a href="advis.html#cb54-3" tabindex="-1"></a></span>
<span id="cb54-4"><a href="advis.html#cb54-4" tabindex="-1"></a><span class="do">## produce overlapped density plot</span></span>
<span id="cb54-5"><a href="advis.html#cb54-5" tabindex="-1"></a><span class="fu">ggplot</span>(gapminderNoOc[gapminderNoOc<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1952</span>, ],</span>
<span id="cb54-6"><a href="advis.html#cb54-6" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb54-7"><a href="advis.html#cb54-7" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb54-8"><a href="advis.html#cb54-8" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-62-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>This is an informative plot. We can see that African countries tend to have lower GDP per capita than the Americas for example; with Asia and Africa the poorest continents in the 1950s in terms of GDP.</p>
<div class="panel panel-default">
<div class="panel-heading">
Question
</div>
<div class="panel-body">
What does the <code>Oceania</code> density plot tell us about the range of GDPs in the Oceania continent?
</div>
</div>
<div id="positions" class="section level4 hasAnchor" number="1.4.2.1">
<h4><span class="header-section-number">1.4.2.1</span> Positions<a href="advis.html#positions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Professor Rosling uses a <strong>stacked</strong> density plot, rather than overlapping density plots. We can use a <code>position = "stack"</code> argument to the geom to force the stacking.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="advis.html#cb55-1" tabindex="-1"></a><span class="do">## produce stacked density plot</span></span>
<span id="cb55-2"><a href="advis.html#cb55-2" tabindex="-1"></a><span class="fu">ggplot</span>(gapminderNoOc[gapminderNoOc<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1952</span>, ],</span>
<span id="cb55-3"><a href="advis.html#cb55-3" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb55-4"><a href="advis.html#cb55-4" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">position =</span> <span class="st">&quot;stack&quot;</span>) <span class="sc">+</span></span>
<span id="cb55-5"><a href="advis.html#cb55-5" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-64-1.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Histograms and barplots have equivalent <code>position = "dodge"</code> and <code>position = "stack"</code> commands. By default histograms use the latter. The former is not very useful for histograms, but very useful for barplots with multiple discrete groupings.</p>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Try tidying up the axis and legend titles on these plots.
</div>
</div>
<button id="displayTextunnamed-chunk-66" onclick="javascript:toggle(&#39;unnamed-chunk-66&#39;);">
Show: Solution
</button>
<div id="toggleTextunnamed-chunk-66" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="advis.html#cb56-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminderNoOc[gapminderNoOc<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1952</span>, ],</span>
<span id="cb56-2"><a href="advis.html#cb56-2" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb56-3"><a href="advis.html#cb56-3" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">position =</span> <span class="st">&quot;stack&quot;</span>) <span class="sc">+</span></span>
<span id="cb56-4"><a href="advis.html#cb56-4" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb56-5"><a href="advis.html#cb56-5" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;log10(GDP per capita)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb56-6"><a href="advis.html#cb56-6" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Count&quot;</span>) <span class="sc">+</span></span>
<span id="cb56-7"><a href="advis.html#cb56-7" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;1952&quot;</span>) <span class="sc">+</span></span>
<span id="cb56-8"><a href="advis.html#cb56-8" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Continent&quot;</span>)</span></code></pre></div>
<img src="_main_files/figure-html/unnamed-chunk-112-1.png" width="50%" style="display: block; margin: auto;" />
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Write a function in R that takes a <code>data</code> and a <code>year</code> argument and plots a stacked density plot for a given year. Use this to plot the data for 1952, 1982, 1992 and 2002. (Remember that if you want to plot a <code>ggplot2</code> figure from inside a function, you will have to call <code>print()</code> explicitly.)
</div>
</div>
<button id="displayTextunnamed-chunk-68" onclick="javascript:toggle(&#39;unnamed-chunk-68&#39;);">
Show: Solution
</button>
<div id="toggleTextunnamed-chunk-68" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="advis.html#cb57-1" tabindex="-1"></a>plotGapminder_gg <span class="ot">&lt;-</span> <span class="cf">function</span>(data, year) {</span>
<span id="cb57-2"><a href="advis.html#cb57-2" tabindex="-1"></a>    p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data[data<span class="sc">$</span>year <span class="sc">==</span> year, ],</span>
<span id="cb57-3"><a href="advis.html#cb57-3" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb57-4"><a href="advis.html#cb57-4" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">position =</span> <span class="st">&quot;stack&quot;</span>) <span class="sc">+</span></span>
<span id="cb57-5"><a href="advis.html#cb57-5" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb57-6"><a href="advis.html#cb57-6" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;log10(GDP per capita)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb57-7"><a href="advis.html#cb57-7" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Count&quot;</span>) <span class="sc">+</span></span>
<span id="cb57-8"><a href="advis.html#cb57-8" tabindex="-1"></a>    <span class="fu">ggtitle</span>(year) <span class="sc">+</span></span>
<span id="cb57-9"><a href="advis.html#cb57-9" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Continent&quot;</span>)</span>
<span id="cb57-10"><a href="advis.html#cb57-10" tabindex="-1"></a>    <span class="fu">print</span>(p)</span>
<span id="cb57-11"><a href="advis.html#cb57-11" tabindex="-1"></a>}</span>
<span id="cb57-12"><a href="advis.html#cb57-12" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1952</span>, <span class="dv">1982</span>, <span class="dv">1992</span>, <span class="dv">2002</span>)) {</span>
<span id="cb57-13"><a href="advis.html#cb57-13" tabindex="-1"></a>    <span class="fu">plotGapminder_gg</span>(gapminderNoOc, i)</span>
<span id="cb57-14"><a href="advis.html#cb57-14" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-113-1.png" width="50%" style="display: block; margin: auto;" /><img src="_main_files/figure-html/unnamed-chunk-113-2.png" width="50%" style="display: block; margin: auto;" /><img src="_main_files/figure-html/unnamed-chunk-113-3.png" width="50%" style="display: block; margin: auto;" /><img src="_main_files/figure-html/unnamed-chunk-113-4.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Produce a density plot of <code>log10(gdpPercap)</code> faceted by <code>continent</code>, for the year 1952.
</div>
</div>
<button id="displayTextunnamed-chunk-70" onclick="javascript:toggle(&#39;unnamed-chunk-70&#39;);">
Show: Solution
</button>
<div id="toggleTextunnamed-chunk-70" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="advis.html#cb58-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminderNoOc[gapminderNoOc<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">1952</span>, ],</span>
<span id="cb58-2"><a href="advis.html#cb58-2" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap)) <span class="sc">+</span></span>
<span id="cb58-3"><a href="advis.html#cb58-3" tabindex="-1"></a>    <span class="fu">geom_density</span>()  <span class="sc">+</span></span>
<span id="cb58-4"><a href="advis.html#cb58-4" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>()  <span class="sc">+</span></span>
<span id="cb58-5"><a href="advis.html#cb58-5" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> continent)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-114-1.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
Now generate a series of stacked density plots, with colours corresponding to different continents, but faceted by different years, to see how the relative distributions change over time.
</div>
</div>
<button id="displayTextunnamed-chunk-72" onclick="javascript:toggle(&#39;unnamed-chunk-72&#39;);">
Show: Solution
</button>
<div id="toggleTextunnamed-chunk-72" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="advis.html#cb59-1" tabindex="-1"></a><span class="fu">ggplot</span>(gapminderNoOc,</span>
<span id="cb59-2"><a href="advis.html#cb59-2" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb59-3"><a href="advis.html#cb59-3" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">position =</span> <span class="st">&quot;stack&quot;</span>) <span class="sc">+</span></span>
<span id="cb59-4"><a href="advis.html#cb59-4" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb59-5"><a href="advis.html#cb59-5" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> year)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-115-1.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="saving-plots" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Saving plots<a href="advis.html#saving-plots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To save plots you can use the <code>ggsave()</code> function. This allows you to write out your file to a range of formats, and specify size, resolution etc. as required e.g.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="advis.html#cb60-1" tabindex="-1"></a><span class="do">## produce lovely plot</span></span>
<span id="cb60-2"><a href="advis.html#cb60-2" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(gapminderNoOc,</span>
<span id="cb60-3"><a href="advis.html#cb60-3" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">fill =</span> continent)) <span class="sc">+</span></span>
<span id="cb60-4"><a href="advis.html#cb60-4" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">position =</span> <span class="st">&quot;stack&quot;</span>) <span class="sc">+</span></span>
<span id="cb60-5"><a href="advis.html#cb60-5" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb60-6"><a href="advis.html#cb60-6" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>year)</span>
<span id="cb60-7"><a href="advis.html#cb60-7" tabindex="-1"></a></span>
<span id="cb60-8"><a href="advis.html#cb60-8" tabindex="-1"></a><span class="do">## save plot as PDF</span></span>
<span id="cb60-9"><a href="advis.html#cb60-9" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;myplot.pdf&quot;</span>, p)</span></code></pre></div>
<p>Take a look at the help file <code>?ggsave</code> for more details.</p>
</div>
<div id="additional-task" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> Additional task<a href="advis.html#additional-task" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s look at some data from an experiment exploring the effect of sexual activity on lifespan of male fruitflies, described in <a href="https://www.nature.com/articles/294580a0">Partridge and Farquhar (1981)</a>.</p>
<blockquote>
<p><em>A cost of increased reproduction in terms of reduced longevity has been shown for female fruitflies, but not for males. We have data from an experiment that used a factorial design to assess whether increased sexual activity affected the lifespan of male fruitflies.</em></p>
<p><em>The flies used were an outbred stock. Sexual activity was manipulated by supplying individual males with one or eight receptive virgin females per day. The longevity of these males was compared with that of two control types. The first control consisted of two sets of individual males kept with one or eight newly inseminated females. Newly inseminated females will not usually re-mate for at least two days, and thus served as a control for any effect of competition with the male for food or space. The second control was a set of individual males kept with no females. There were 25 males in each of the five groups, which were treated identically in number of anaesthetisations (using <span class="math inline">\(\mathrm{CO}_2\)</span>) and provision of fresh food medium.</em></p>
<p>The data should have the following columns:</p>
<ul>
<li><strong>id</strong>: a ID for each fly in each group (1–25).</li>
<li><strong>partners</strong>: number of companions (0, 1 or 8).</li>
<li><strong>type</strong>: type of companion (inseminated female; virgin female; not applicable (when ‘partners = 0’)).</li>
<li><strong>longevity</strong>: lifespan, in days.</li>
<li><strong>thorax</strong>: length of thorax, in mm.</li>
</ul>
<p>Source: <a href="https://www.nature.com/articles/294580a0">Partridge and Farquhar (1981)</a></p>
</blockquote>
<div style="page-break-after: always;"></div>
<div class="panel panel-default">
<div class="panel-heading">
Task
</div>
<div class="panel-body">
<p>The file <code>ff.rds</code> contains the data from this experiment. Download this data set to your working directory, read it into R using the command:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="advis.html#cb61-1" tabindex="-1"></a>ff <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;ff.rds&quot;</span>)</span></code></pre></div>
<p>and use <code>ggplot2</code> to reproduce something similar to the plot below:</p>
<img src="advis/images/fruitflies.png" alt="Plot of fruitfly data stratified by experimental group" />.
</div>
</div>
<button id="displayTextunnamed-chunk-76" onclick="javascript:toggle(&#39;unnamed-chunk-76&#39;);">
Show: Solution
</button>
<div id="toggleTextunnamed-chunk-76" style="display: none">
<div class="panel panel-default">
<div class="panel-heading panel-heading1">
Solution
</div>
<div class="panel-body">
<div class="tab">
<button class="tablinksunnamed-chunk-76 active" onclick="javascript:openCode(event, &#39;option1unnamed-chunk-76&#39;, &#39;unnamed-chunk-76&#39;);">
ggplot2
</button>
<button class="tablinksunnamed-chunk-76" onclick="javascript:openCode(event, &#39;option2unnamed-chunk-76&#39;, &#39;unnamed-chunk-76&#39;);">
Base R
</button>
</div>
<div id="option1unnamed-chunk-76" class="tabcontentunnamed-chunk-76">
<p>For comparison <code>ggplot2</code> and base R versions of the code are provided. You can see how much easier it is to produce a plot like this using <code>ggplot2</code>! Note that in the base R code we have used the <code>lm()</code> function to fit a <strong>linear regression model</strong> to each subset of data in order to produce the fitted lines. We do not cover <strong>statistical modelling in R</strong> in this workshop, but if you are interested, there is a workshop <a href="https://exeter-data-analytics.github.io/StatModelling/">here</a> where you can learn more.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="advis.html#cb62-1" tabindex="-1"></a><span class="do">## produce summary plot</span></span>
<span id="cb62-2"><a href="advis.html#cb62-2" tabindex="-1"></a><span class="fu">ggplot</span>(ff, <span class="fu">aes</span>(<span class="at">y =</span> longevity, <span class="at">x =</span> thorax, </span>
<span id="cb62-3"><a href="advis.html#cb62-3" tabindex="-1"></a>        <span class="at">linetype =</span> partner.type, </span>
<span id="cb62-4"><a href="advis.html#cb62-4" tabindex="-1"></a>        <span class="at">shape =</span> partner.type)) <span class="sc">+</span></span>
<span id="cb62-5"><a href="advis.html#cb62-5" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb62-6"><a href="advis.html#cb62-6" tabindex="-1"></a>    <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb62-7"><a href="advis.html#cb62-7" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>partners) <span class="sc">+</span></span>
<span id="cb62-8"><a href="advis.html#cb62-8" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">linetype =</span> <span class="st">&quot;Partner Type&quot;</span>, </span>
<span id="cb62-9"><a href="advis.html#cb62-9" tabindex="-1"></a>         <span class="at">shape =</span> <span class="st">&quot;Partner Type&quot;</span>) <span class="sc">+</span></span>
<span id="cb62-10"><a href="advis.html#cb62-10" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Longevity (days)&quot;</span>) <span class="sc">+</span></span>
<span id="cb62-11"><a href="advis.html#cb62-11" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Thorax length (mm)&quot;</span>) <span class="sc">+</span></span>
<span id="cb62-12"><a href="advis.html#cb62-12" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-117-1.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
<div id="option2unnamed-chunk-76" class="tabcontentunnamed-chunk-76">
<p>For comparison <code>ggplot2</code> and base R versions of the code are provided. You can see how much easier it is to produce a plot like this using <code>ggplot2</code>! Note that in the base R code we have used the <code>lm()</code> function to fit a <strong>linear regression model</strong> to each subset of data in order to produce the fitted lines. We do not cover <strong>statistical modelling in R</strong> in this module, but if you are interested, there is a workshop <a href="https://exeter-data-analytics.github.io/StatModelling/">here</a> where you can learn more.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="advis.html#cb64-1" tabindex="-1"></a><span class="do">## set up 2 x 2 grid of plots</span></span>
<span id="cb64-2"><a href="advis.html#cb64-2" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb64-3"><a href="advis.html#cb64-3" tabindex="-1"></a></span>
<span id="cb64-4"><a href="advis.html#cb64-4" tabindex="-1"></a><span class="do">## plot controls (set range to be the range of the data </span></span>
<span id="cb64-5"><a href="advis.html#cb64-5" tabindex="-1"></a><span class="do">## so that it&#39;s the same on all plots)</span></span>
<span id="cb64-6"><a href="advis.html#cb64-6" tabindex="-1"></a><span class="fu">plot</span>(ff<span class="sc">$</span>thorax[ff<span class="sc">$</span>partner.type <span class="sc">==</span> <span class="st">&quot;Control&quot;</span>], </span>
<span id="cb64-7"><a href="advis.html#cb64-7" tabindex="-1"></a>    ff<span class="sc">$</span>longevity[ff<span class="sc">$</span>partner.type <span class="sc">==</span> <span class="st">&quot;Control&quot;</span>], </span>
<span id="cb64-8"><a href="advis.html#cb64-8" tabindex="-1"></a>    <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">xlab =</span> <span class="st">&quot;Thorax length (mm)&quot;</span>, </span>
<span id="cb64-9"><a href="advis.html#cb64-9" tabindex="-1"></a>    <span class="at">ylab =</span> <span class="st">&quot;Longevity (days)&quot;</span>, <span class="at">main =</span> <span class="st">&quot;Controls&quot;</span>,</span>
<span id="cb64-10"><a href="advis.html#cb64-10" tabindex="-1"></a>    <span class="at">xlim =</span> <span class="fu">range</span>(ff<span class="sc">$</span>thorax), <span class="at">ylim =</span> <span class="fu">range</span>(ff<span class="sc">$</span>longevity))</span>
<span id="cb64-11"><a href="advis.html#cb64-11" tabindex="-1"></a></span>
<span id="cb64-12"><a href="advis.html#cb64-12" tabindex="-1"></a><span class="do">## fit linear model and add fitted line using abline()</span></span>
<span id="cb64-13"><a href="advis.html#cb64-13" tabindex="-1"></a>temp_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(longevity <span class="sc">~</span> thorax, </span>
<span id="cb64-14"><a href="advis.html#cb64-14" tabindex="-1"></a>    <span class="at">data =</span> ff[ff<span class="sc">$</span>partner.type <span class="sc">==</span> <span class="st">&quot;Control&quot;</span>, ])</span>
<span id="cb64-15"><a href="advis.html#cb64-15" tabindex="-1"></a><span class="fu">abline</span>(<span class="fu">coef</span>(temp_lm)[<span class="dv">1</span>], <span class="fu">coef</span>(temp_lm)[<span class="dv">2</span>])</span>
<span id="cb64-16"><a href="advis.html#cb64-16" tabindex="-1"></a></span>
<span id="cb64-17"><a href="advis.html#cb64-17" tabindex="-1"></a>titles <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;One partner&quot;</span>, <span class="st">&quot;Eight partners&quot;</span>)</span>
<span id="cb64-18"><a href="advis.html#cb64-18" tabindex="-1"></a>partners <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;8&quot;</span>)</span>
<span id="cb64-19"><a href="advis.html#cb64-19" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(titles)) {</span>
<span id="cb64-20"><a href="advis.html#cb64-20" tabindex="-1"></a>    <span class="do">## extract subset of data for brevity of code</span></span>
<span id="cb64-21"><a href="advis.html#cb64-21" tabindex="-1"></a>    temp <span class="ot">&lt;-</span> ff[ff<span class="sc">$</span>partners <span class="sc">==</span> partners[i], ]</span>
<span id="cb64-22"><a href="advis.html#cb64-22" tabindex="-1"></a>    </span>
<span id="cb64-23"><a href="advis.html#cb64-23" tabindex="-1"></a>    <span class="do">## set point characters</span></span>
<span id="cb64-24"><a href="advis.html#cb64-24" tabindex="-1"></a>    temp_pch <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">20</span>, <span class="fu">nrow</span>(temp))</span>
<span id="cb64-25"><a href="advis.html#cb64-25" tabindex="-1"></a>    temp_pch[temp<span class="sc">$</span>partner.type <span class="sc">!=</span> <span class="st">&quot;Virgin&quot;</span>] <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb64-26"><a href="advis.html#cb64-26" tabindex="-1"></a>    </span>
<span id="cb64-27"><a href="advis.html#cb64-27" tabindex="-1"></a>    <span class="do">## produce plot</span></span>
<span id="cb64-28"><a href="advis.html#cb64-28" tabindex="-1"></a>    <span class="fu">plot</span>(temp<span class="sc">$</span>thorax, temp<span class="sc">$</span>longevity, </span>
<span id="cb64-29"><a href="advis.html#cb64-29" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;Thorax length (mm)&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;Longevity (days)&quot;</span>, </span>
<span id="cb64-30"><a href="advis.html#cb64-30" tabindex="-1"></a>        <span class="at">xlim =</span> <span class="fu">range</span>(ff<span class="sc">$</span>thorax), <span class="at">ylim =</span> <span class="fu">range</span>(ff<span class="sc">$</span>longevity),</span>
<span id="cb64-31"><a href="advis.html#cb64-31" tabindex="-1"></a>        <span class="at">main =</span> titles[i], <span class="at">pch =</span> temp_pch)</span>
<span id="cb64-32"><a href="advis.html#cb64-32" tabindex="-1"></a>    </span>
<span id="cb64-33"><a href="advis.html#cb64-33" tabindex="-1"></a>    <span class="do">## fit linear models and add fitted lines using abline()</span></span>
<span id="cb64-34"><a href="advis.html#cb64-34" tabindex="-1"></a>    temp_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(longevity <span class="sc">~</span> thorax, </span>
<span id="cb64-35"><a href="advis.html#cb64-35" tabindex="-1"></a>        <span class="at">data =</span> temp[temp<span class="sc">$</span>partner.type <span class="sc">==</span> <span class="st">&quot;Virgin&quot;</span>, ])</span>
<span id="cb64-36"><a href="advis.html#cb64-36" tabindex="-1"></a>    <span class="fu">abline</span>(<span class="fu">coef</span>(temp_lm)[<span class="dv">1</span>], <span class="fu">coef</span>(temp_lm)[<span class="dv">2</span>])</span>
<span id="cb64-37"><a href="advis.html#cb64-37" tabindex="-1"></a>    temp_lm <span class="ot">&lt;-</span> <span class="fu">lm</span>(longevity <span class="sc">~</span> thorax, </span>
<span id="cb64-38"><a href="advis.html#cb64-38" tabindex="-1"></a>        <span class="at">data =</span> temp[temp<span class="sc">$</span>partner.type <span class="sc">==</span> <span class="st">&quot;Inseminated&quot;</span>, ])</span>
<span id="cb64-39"><a href="advis.html#cb64-39" tabindex="-1"></a>    <span class="fu">abline</span>(<span class="fu">coef</span>(temp_lm)[<span class="dv">1</span>], <span class="fu">coef</span>(temp_lm)[<span class="dv">2</span>], <span class="at">lty =</span> <span class="dv">2</span>)</span>
<span id="cb64-40"><a href="advis.html#cb64-40" tabindex="-1"></a>    </span>
<span id="cb64-41"><a href="advis.html#cb64-41" tabindex="-1"></a>    <span class="do">## add legend</span></span>
<span id="cb64-42"><a href="advis.html#cb64-42" tabindex="-1"></a>    <span class="fu">legend</span>(<span class="fl">0.65</span>, <span class="dv">95</span>, <span class="at">pch =</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">1</span>), <span class="at">lty =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, </span>
<span id="cb64-43"><a href="advis.html#cb64-43" tabindex="-1"></a>        <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">&quot;Virgin&quot;</span>, <span class="st">&quot;Inseminated&quot;</span>))</span>
<span id="cb64-44"><a href="advis.html#cb64-44" tabindex="-1"></a>}</span>
<span id="cb64-45"><a href="advis.html#cb64-45" tabindex="-1"></a><span class="do">## reset par</span></span>
<span id="cb64-46"><a href="advis.html#cb64-46" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-118-1.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
<script> javascript:hide('option2unnamed-chunk-76') </script>
</div>
</div>
</div>
</div>
<div id="additional-functionality-going-beyond-static-plots" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> Additional functionality: going beyond static plots<a href="advis.html#additional-functionality-going-beyond-static-plots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There has been a whole ecosystem of packages that have evolved from the core <code>tidyverse</code>. One such package is <a href="https://gganimate.com/articles/gganimate.html"><code>gganimate</code></a>, which, as the name suggests, allows one to turn <code>ggplot2</code> plots into animations.</p>
<p>The website for the package can be found <a href="https://gganimate.com/articles/gganimate.html">here</a>. We will not give a full demonstration here, but instead show how we can produce an animation similar to that of Professor Rosling’s, with the addition of two more lines of code.</p>
<p>Firstly, you will need to install <code>gganimate</code>, and you might also have to install the <code>gifski</code> and <code>av</code> packages in order to write out the animation into a <code>.gif</code> or other video file. Then:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="advis.html#cb65-1" tabindex="-1"></a><span class="do">## load library</span></span>
<span id="cb65-2"><a href="advis.html#cb65-2" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb65-3"><a href="advis.html#cb65-3" tabindex="-1"></a></span>
<span id="cb65-4"><a href="advis.html#cb65-4" tabindex="-1"></a><span class="do">## produce plot (ignoring year)</span></span>
<span id="cb65-5"><a href="advis.html#cb65-5" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(gapminder, </span>
<span id="cb65-6"><a href="advis.html#cb65-6" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">size =</span> pop, <span class="at">colour =</span> continent)) <span class="sc">+</span></span>
<span id="cb65-7"><a href="advis.html#cb65-7" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb65-8"><a href="advis.html#cb65-8" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span> </span>
<span id="cb65-9"><a href="advis.html#cb65-9" tabindex="-1"></a>    <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb65-10"><a href="advis.html#cb65-10" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;log10(GDP per capita)&quot;</span>) <span class="sc">+</span></span>
<span id="cb65-11"><a href="advis.html#cb65-11" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Life expectancy at birth (years)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb65-12"><a href="advis.html#cb65-12" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">colour =</span> <span class="st">&quot;Continent&quot;</span>, <span class="at">size =</span> <span class="st">&quot;Population size&quot;</span>) <span class="sc">+</span> </span>
<span id="cb65-13"><a href="advis.html#cb65-13" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span>
<span id="cb65-14"><a href="advis.html#cb65-14" tabindex="-1"></a></span>
<span id="cb65-15"><a href="advis.html#cb65-15" tabindex="-1"></a><span class="do">## turn into animation, using year to guide transitions</span></span>
<span id="cb65-16"><a href="advis.html#cb65-16" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">transition_time</span>(year) <span class="sc">+</span></span>
<span id="cb65-17"><a href="advis.html#cb65-17" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;{frame_time}&quot;</span>)</span>
<span id="cb65-18"><a href="advis.html#cb65-18" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="advis/images/gapminder.gif" width="50%" style="display: block; margin: auto;" /></p>
<p>Neat eh? To save animations, once can use the <code>anim_save()</code>, similarly to the <code>ggsave()</code> function we saw earlier.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="advis.html#cb66-1" tabindex="-1"></a><span class="do">## save as gif (renders to gif by default)</span></span>
<span id="cb66-2"><a href="advis.html#cb66-2" tabindex="-1"></a><span class="fu">anim_save</span>(<span class="st">&quot;gapminder.gif&quot;</span>, p)</span>
<span id="cb66-3"><a href="advis.html#cb66-3" tabindex="-1"></a></span>
<span id="cb66-4"><a href="advis.html#cb66-4" tabindex="-1"></a><span class="do">## save to mp4 (needs new renderer argument)</span></span>
<span id="cb66-5"><a href="advis.html#cb66-5" tabindex="-1"></a><span class="fu">anim_save</span>(<span class="st">&quot;gapminder.mp4&quot;</span>, <span class="fu">animate</span>(p, <span class="at">renderer =</span> <span class="fu">av_renderer</span>()))</span></code></pre></div>
<div align="center">
<video src="advis/images/gapminder.mp4" width="320" height="320" type="video/mp4" controls></video>
</div>
<p>Take a look at the <a href="https://gganimate.com/articles/gganimate.html"><code>gganimate</code> website</a> for more examples and ideas.</p>
<p>Another useful package is <a href="https://plotly.com/r/"><code>plotly</code></a>, which allows you to generate interactive plots from data (if you are viewing the HTML note, then try interacting with the plot below). There is even a useful <code>ggplotly()</code> function to automatically turn <code>ggplot2</code> figures into <code>plotly</code> figures.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="advis.html#cb67-1" tabindex="-1"></a><span class="do">## load library</span></span>
<span id="cb67-2"><a href="advis.html#cb67-2" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb67-3"><a href="advis.html#cb67-3" tabindex="-1"></a></span>
<span id="cb67-4"><a href="advis.html#cb67-4" tabindex="-1"></a><span class="do">## produce plot from 1952</span></span>
<span id="cb67-5"><a href="advis.html#cb67-5" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">filter</span>(gapminder, year <span class="sc">==</span> <span class="dv">1952</span>), </span>
<span id="cb67-6"><a href="advis.html#cb67-6" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">size =</span> pop, <span class="at">colour =</span> continent)) <span class="sc">+</span></span>
<span id="cb67-7"><a href="advis.html#cb67-7" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb67-8"><a href="advis.html#cb67-8" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span> </span>
<span id="cb67-9"><a href="advis.html#cb67-9" tabindex="-1"></a>    <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb67-10"><a href="advis.html#cb67-10" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;log10(GDP per capita)&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-11"><a href="advis.html#cb67-11" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Life expectancy at birth (years)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb67-12"><a href="advis.html#cb67-12" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">size =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-13"><a href="advis.html#cb67-13" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">colour =</span> <span class="st">&quot;Continent&quot;</span>) <span class="sc">+</span> </span>
<span id="cb67-14"><a href="advis.html#cb67-14" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;1952&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-15"><a href="advis.html#cb67-15" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="advis.html#cb68-1" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">width =</span> <span class="dv">420</span>, <span class="at">height =</span> <span class="dv">420</span>)</span></code></pre></div>
<div align="center">
<div id="htmlwidget-69f370be55cb4b40baa5" style="width:420px;height:420px;" class="plotly html-widget "></div>
<script type="application/json" data-for="htmlwidget-69f370be55cb4b40baa5">{"x":{"data":[{"x":[2.9442771161033847],"y":[46.470999999999997],"text":"gdpPercap:    879.5836<br />lifeExp: 46.471<br />pop:     60011<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":0.39256597552677752,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4264347203837331],"y":[34.811999999999998],"text":"gdpPercap:   2669.5295<br />lifeExp: 34.812<br />pop:     63149<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":0.40269891796939894,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.042571943572232],"y":[40.715000000000003],"text":"gdpPercap:   1102.9909<br />lifeExp: 40.715<br />pop:    153936<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":0.62873454465385792,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.5747754426179159],"y":[34.481999999999999],"text":"gdpPercap:    375.6431<br />lifeExp: 34.482<br />pop:    216964<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":0.7464333986256525,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4343908858518062],"y":[52.723999999999997],"text":"gdpPercap:   2718.8853<br />lifeExp: 52.724<br />pop:    257700<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":0.81349414803153186,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.6859482337800413],"y":[30],"text":"gdpPercap:    485.2307<br />lifeExp: 30.000<br />pop:    284320<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":0.85447808567358674,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.0600843443064192],"y":[41.406999999999996],"text":"gdpPercap:   1148.3766<br />lifeExp: 41.407<br />pop:    290243<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":0.86333252161292551,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.6328090876363524],"y":[37.003],"text":"gdpPercap:   4293.4765<br />lifeExp: 37.003<br />pop:    420702<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.0394043072242434,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.9300526050205478],"y":[47.622],"text":"gdpPercap:    851.2411<br />lifeExp: 47.622<br />pop:    442308<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.0657605025709473,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.3844932769166256],"y":[41.725000000000001],"text":"gdpPercap:   2423.7804<br />lifeExp: 41.725<br />pop:    485831<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.1169656958550356,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.2940153194906676],"y":[50.985999999999997],"text":"gdpPercap:   1967.9557<br />lifeExp: 50.986<br />pop:    516556<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.1517439219962919,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.4769045152043669],"y":[32.5],"text":"gdpPercap:    299.8503<br />lifeExp: 32.500<br />pop:    580653<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.2211121738745156,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.4754477554867704],"y":[42.137999999999998],"text":"gdpPercap:    298.8462<br />lifeExp: 42.138<br />pop:    748747<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.386643344543405,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.3274859174242151],"y":[42.110999999999997],"text":"gdpPercap:   2125.6214<br />lifeExp: 42.111<br />pop:    854885<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.4816685831122969,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.7601004101431883],"y":[38.479999999999997],"text":"gdpPercap:    575.5730<br />lifeExp: 38.480<br />pop:    863308<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.4889499742131165,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.3779521224475015],"y":[42.722999999999999],"text":"gdpPercap:   2387.5481<br />lifeExp: 42.723<br />pop:   1019729<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.6182276183992603,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.8710565594093267],"y":[40.542999999999999],"text":"gdpPercap:    743.1159<br />lifeExp: 40.543<br />pop:   1022556<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.6204691763171146,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.9344018133538139],"y":[38.595999999999997],"text":"gdpPercap:    859.8087<br />lifeExp: 38.596<br />pop:   1219113<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.7693722228408277,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.029915447835549],"y":[35.463000000000001],"text":"gdpPercap:   1071.3107<br />lifeExp: 35.463<br />pop:   1291695<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.8212820741465316,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.5171174236159333],"y":[35.927999999999997],"text":"gdpPercap:    328.9406<br />lifeExp: 35.928<br />pop:   1438760<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":1.9221682591477343,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.0264320126717377],"y":[38.222999999999999],"text":"gdpPercap:   1062.7522<br />lifeExp: 38.223<br />pop:   1738315<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.1128149573191837,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.9443779036382201],"y":[30.331],"text":"gdpPercap:    879.7877<br />lifeExp: 30.331<br />pop:   2143249<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.3460298776975259,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.5305793268568042],"y":[39.030999999999999],"text":"gdpPercap:    339.2965<br />lifeExp: 39.031<br />pop:   2445618<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.5060604056833453,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.0552826850697294],"y":[32.978000000000002],"text":"gdpPercap:   1135.7498<br />lifeExp: 32.978<br />pop:   2526994<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.5474128149661368,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.6931321343486228],"y":[40],"text":"gdpPercap:    493.3239<br />lifeExp: 40.000<br />pop:   2534927<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.5514082321410885,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.7077374684251021],"y":[33.609000000000002],"text":"gdpPercap:    510.1965<br />lifeExp: 33.609<br />pop:   2664249<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.6156801077124383,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.0597106180244795],"y":[42.037999999999997],"text":"gdpPercap:   1147.3888<br />lifeExp: 42.038<br />pop:   2672000<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.6194821945723157,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.0713907290818487],"y":[38.091999999999999],"text":"gdpPercap:   1178.6659<br />lifeExp: 38.092<br />pop:   2682462<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.6246053700158591,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.1614749102802429],"y":[37.277999999999999],"text":"gdpPercap:   1450.3570<br />lifeExp: 37.278<br />pop:   2755589<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.6601397025571023,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.5672206138227596],"y":[36.256],"text":"gdpPercap:    369.1651<br />lifeExp: 36.256<br />pop:   2917802<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.7373172400696366,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.1425755133131092],"y":[40.476999999999997],"text":"gdpPercap:   1388.5947<br />lifeExp: 40.477<br />pop:   2977019<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.7649547425966574,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.609470734853601],"y":[48.451000000000001],"text":"gdpPercap:    406.8841<br />lifeExp: 48.451<br />pop:   3080907<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.8127848764932302,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.8818862174230904],"y":[37.444000000000003],"text":"gdpPercap:    761.8794<br />lifeExp: 37.444<br />pop:   3379468<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":2.9459230132822114,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.1668667439061169],"y":[44.600000000000001],"text":"gdpPercap:   1468.4756<br />lifeExp: 44.600<br />pop:   3647735<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":3.0606161388431321,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.6554620948372678],"y":[33.685000000000002],"text":"gdpPercap:    452.3370<br />lifeExp: 33.685<br />pop:   3838168<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":3.1394907946377524,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.546617951893976],"y":[30.015000000000001],"text":"gdpPercap:   3520.6103<br />lifeExp: 30.015<br />pop:   4232095<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":3.2966658389956054,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.7350039250646971],"y":[31.975000000000001],"text":"gdpPercap:    543.2552<br />lifeExp: 31.975<br />pop:   4469979<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":3.3880512041389421,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.1592698569002877],"y":[36.680999999999997],"text":"gdpPercap:   1443.0117<br />lifeExp: 36.681<br />pop:   4762912<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":3.4973049503365732,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.0691749464286691],"y":[38.523000000000003],"text":"gdpPercap:   1172.6677<br />lifeExp: 38.523<br />pop:   5009067<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":3.5865397144819813,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.9596608637313313],"y":[43.149000000000001],"text":"gdpPercap:    911.2989<br />lifeExp: 43.149<br />pop:   5581001<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":3.7857617070035432,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.8661416540551472],"y":[39.978000000000002],"text":"gdpPercap:    734.7535<br />lifeExp: 39.978<br />pop:   5824797<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":3.8675649970099326,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.6707337315928892],"y":[31.286000000000001],"text":"gdpPercap:    468.5260<br />lifeExp: 31.286<br />pop:   6446316<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":4.0686751771478695,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.9312243461536549],"y":[42.270000000000003],"text":"gdpPercap:    853.5409<br />lifeExp: 42.270<br />pop:   6464046<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":4.0742665937816938,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.8553071488998873],"y":[41.215000000000003],"text":"gdpPercap:    716.6501<br />lifeExp: 41.215<br />pop:   8322925<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":4.6231205116812149,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.2084389723810651],"y":[38.634999999999998],"text":"gdpPercap:   1615.9911<br />lifeExp: 38.635<br />pop:   8504667<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":4.6733238821179954,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.3889902366128295],"y":[43.076999999999998],"text":"gdpPercap:   2449.0082<br />lifeExp: 43.077<br />pop:   9279525<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":4.8815764699404625,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.2274248143258331],"y":[42.872999999999998],"text":"gdpPercap:   1688.2036<br />lifeExp: 42.873<br />pop:   9939217<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.0521159584752953,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.8923964580961394],"y":[39.143000000000001],"text":"gdpPercap:    780.5423<br />lifeExp: 39.143<br />pop:  14100005<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":6.0173719493583402,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.6744289754841963],"y":[45.009],"text":"gdpPercap:   4725.2955<br />lifeExp: 45.009<br />pop:  14264935<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":6.0524627102859556,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.5588840279669709],"y":[34.078000000000003],"text":"gdpPercap:    362.1463<br />lifeExp: 34.078<br />pop:  20860941<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":7.3192093815203405,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.1519280501569278],"y":[41.893000000000001],"text":"gdpPercap:   1418.8224<br />lifeExp: 41.893<br />pop:  22223309<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":7.5544279988125345,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.0323293453507603],"y":[36.323999999999998],"text":"gdpPercap:   1077.2819<br />lifeExp: 36.324<br />pop:  33119096<br />continent: Africa","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":9.222240865081206,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4804772115240326],"y":[59.100000000000001],"text":"gdpPercap:   3023.2719<br />lifeExp: 59.100<br />pop:    662850<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":1.3046825511706657,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4194616385247927],"y":[57.206000000000003],"text":"gdpPercap:   2627.0095<br />lifeExp: 57.206<br />pop:    926317<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":1.5423290585073648,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.3945182793314443],"y":[55.191000000000003],"text":"gdpPercap:   2480.3803<br />lifeExp: 55.191<br />pop:    940080<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":1.5537445936164469,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4930903760317378],"y":[42.314],"text":"gdpPercap:   3112.3639<br />lifeExp: 42.314<br />pop:   1165790<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":1.7302441386149996,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4621779317126391],"y":[58.530000000000001],"text":"gdpPercap:   2898.5309<br />lifeExp: 58.530<br />pop:   1426095<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":1.9136894051248952,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.3414199233324244],"y":[41.911999999999999],"text":"gdpPercap:   2194.9262<br />lifeExp: 41.912<br />pop:   1517453<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":1.9740349982876342,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.2905484898372737],"y":[62.649000000000001],"text":"gdpPercap:   1952.3087<br />lifeExp: 62.649<br />pop:   1555876<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":1.9988707583485572,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4840581192497848],"y":[45.262],"text":"gdpPercap:   3048.3029<br />lifeExp: 45.262<br />pop:   2042865<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":2.2904301810759051,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4888269675210974],"y":[64.280000000000001],"text":"gdpPercap:   3081.9598<br />lifeExp: 64.280<br />pop:   2227000<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":2.3914281239336974,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.7571504724556046],"y":[66.070999999999998],"text":"gdpPercap:   5716.7667<br />lifeExp: 66.071<br />pop:   2252965<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":2.4053287725735184,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.1454192899578319],"y":[45.927999999999997],"text":"gdpPercap:   1397.7171<br />lifeExp: 45.928<br />pop:   2491346<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":2.5293809729569663,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4277013118156043],"y":[40.414000000000001],"text":"gdpPercap:   2677.3263<br />lifeExp: 40.414<br />pop:   2883315<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":2.7210922757894274,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.3852912098780523],"y":[42.023000000000003],"text":"gdpPercap:   2428.2378<br />lifeExp: 42.023<br />pop:   3146381<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":2.8425157470282252,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.2649044228437729],"y":[37.579000000000001],"text":"gdpPercap:   1840.3669<br />lifeExp: 37.579<br />pop:   3201488<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":2.8673001869043979,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5468030038250093],"y":[48.356999999999999],"text":"gdpPercap:   3522.1107<br />lifeExp: 48.357<br />pop:   3548753<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":3.0188053444933662,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.8859150311115758],"y":[55.088000000000001],"text":"gdpPercap:   7689.7998<br />lifeExp: 55.088<br />pop:   5439568<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":3.7374847473011394,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.7471428178485775],"y":[59.420999999999999],"text":"gdpPercap:   5586.5388<br />lifeExp: 59.421<br />pop:   6007797<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":3.9278495881959112,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5954938837938353],"y":[54.744999999999997],"text":"gdpPercap:   3939.9788<br />lifeExp: 54.745<br />pop:   6377619<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":4.046937611745423,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5750172627178163],"y":[43.902000000000001],"text":"gdpPercap:   3758.5234<br />lifeExp: 43.902<br />pop:   8025700<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":4.5398205328244758,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.3312480945543395],"y":[50.643000000000001],"text":"gdpPercap:   2144.1151<br />lifeExp: 50.643<br />pop:  12350771<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":5.6317615519447433,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4.055652015799267],"y":[68.75],"text":"gdpPercap:  11367.1611<br />lifeExp: 68.750<br />pop:  14785584<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":6.1619258135279109,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.7716841063854578],"y":[62.484999999999999],"text":"gdpPercap:   5911.3151<br />lifeExp: 62.485<br />pop:  17876956<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":6.7755414969930774,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5413452520681394],"y":[50.789000000000001],"text":"gdpPercap:   3478.1255<br />lifeExp: 50.789<br />pop:  30144317<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":8.7983239402396407,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.3240651209271301],"y":[50.917000000000002],"text":"gdpPercap:   2108.9444<br />lifeExp: 50.917<br />pop:  56602560<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":12.056333718964508,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4.1458326795437701],"y":[68.439999999999998],"text":"gdpPercap:  13990.4821<br />lifeExp: 68.440<br />pop: 157553000<br />continent: Americas","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":20.114561178766404,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.9941888591046819],"y":[50.939],"text":"gdpPercap:   9867.0848<br />lifeExp: 50.939<br />pop:    120447<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":0.55615419520662479,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[5.0349585749878187],"y":[55.564999999999998],"text":"gdpPercap: 108382.3529<br />lifeExp: 55.565<br />pop:    160000<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":0.64099879808202331,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.2620309040668611],"y":[37.578000000000003],"text":"gdpPercap:   1828.2303<br />lifeExp: 37.578<br />pop:    507833<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":1.1419778576409747,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.1894644312790241],"y":[43.158000000000001],"text":"gdpPercap:   1546.9078<br />lifeExp: 43.158<br />pop:    607914<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":1.2494483170714128,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.8957356431821641],"y":[42.244],"text":"gdpPercap:    786.5669<br />lifeExp: 42.244<br />pop:    800663<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":1.433910693687656,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.1805823984758761],"y":[43.159999999999997],"text":"gdpPercap:   1515.5923<br />lifeExp: 43.160<br />pop:   1030585<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":1.6268186119702983,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.3645769259938039],"y":[60.396000000000001],"text":"gdpPercap:   2315.1382<br />lifeExp: 60.396<br />pop:   1127000<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":1.7012149159749566,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.6843788787613345],"y":[55.927999999999997],"text":"gdpPercap:   4834.8041<br />lifeExp: 55.928<br />pop:   1439529<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":1.922681878490442,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.6113538549108273],"y":[65.390000000000001],"text":"gdpPercap:   4086.5221<br />lifeExp: 65.390<br />pop:   1620914<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":2.0402209862485883,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4849289266728523],"y":[60.960000000000001],"text":"gdpPercap:   3054.4212<br />lifeExp: 60.960<br />pop:   2125900<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":2.3365153570424724,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.2157658381984016],"y":[45.883000000000003],"text":"gdpPercap:   1643.4854<br />lifeExp: 45.883<br />pop:   3661549<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":3.0664059507264794,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.8102025884940609],"y":[39.875],"text":"gdpPercap:   6459.5548<br />lifeExp: 39.875<br />pop:   4005677<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":3.2072675278770659,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.5664012923297479],"y":[39.417000000000002],"text":"gdpPercap:    368.4693<br />lifeExp: 39.417<br />pop:   4693836<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":3.4718518086390677,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.893049876722924],"y":[32.548000000000002],"text":"gdpPercap:    781.7176<br />lifeExp: 32.548<br />pop:   4963829<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":3.5703075627286176,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.6159254503329223],"y":[45.32],"text":"gdpPercap:   4129.7661<br />lifeExp: 45.320<br />pop:   5441766<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":3.7382397853640472,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.2627198642560913],"y":[48.463000000000001],"text":"gdpPercap:   1831.1329<br />lifeExp: 48.463<br />pop:   6748378<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":4.1629090660331887,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.0348417539083994],"y":[57.593000000000004],"text":"gdpPercap:   1083.5320<br />lifeExp: 57.593<br />pop:   7982342<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":4.5275409741735411,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.8917856507063857],"y":[28.800999999999998],"text":"gdpPercap:    779.4453<br />lifeExp: 28.801<br />pop:   8425333<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":4.6514757511301497,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.08168852810498],"y":[58.5],"text":"gdpPercap:   1206.9479<br />lifeExp: 58.500<br />pop:   8550362<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":4.6858617897574524,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.0367397532404041],"y":[50.055999999999997],"text":"gdpPercap:   1088.2778<br />lifeExp: 50.056<br />pop:   8865488<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":4.771429892125628,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.7370858240682567],"y":[36.156999999999996],"text":"gdpPercap:    545.8657<br />lifeExp: 36.157<br />pop:   9182536<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":4.8559984975012096,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4822053422865116],"y":[44.869],"text":"gdpPercap:   3035.3260<br />lifeExp: 44.869<br />pop:  17272000<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":6.6599127332453474,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.5198279937757189],"y":[36.319000000000003],"text":"gdpPercap:    331.0000<br />lifeExp: 36.319<br />pop:  20092996<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":7.1832266988077835,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.0130868621518014],"y":[47.453000000000003],"text":"gdpPercap:   1030.5922<br />lifeExp: 47.453<br />pop:  20947571<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":7.3343910120537554,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.8795531210227017],"y":[50.847999999999999],"text":"gdpPercap:    757.7974<br />lifeExp: 50.848<br />pop:  21289402<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":7.393991639850797,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.104787802215522],"y":[47.752000000000002],"text":"gdpPercap:   1272.8810<br />lifeExp: 47.752<br />pop:  22438691<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":7.590947413674682,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.7818031025725949],"y":[40.411999999999999],"text":"gdpPercap:    605.0665<br />lifeExp: 40.412<br />pop:  26246839<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":8.2098595498502842,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.8354350828905424],"y":[43.436],"text":"gdpPercap:    684.5971<br />lifeExp: 43.436<br />pop:  41346560<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":10.304262531292267,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.8352111067723493],"y":[37.484000000000002],"text":"gdpPercap:    684.2442<br />lifeExp: 37.484<br />pop:  46886859<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":10.97293467663029,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.8748768833905021],"y":[37.468000000000004],"text":"gdpPercap:    749.6817<br />lifeExp: 37.468<br />pop:  82052000<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":14.515827865981432,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5074451677140162],"y":[63.030000000000001],"text":"gdpPercap:   3216.9563<br />lifeExp: 63.030<br />pop:  86459025<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":14.900553141997028,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.7376424130206169],"y":[37.372999999999998],"text":"gdpPercap:    546.5657<br />lifeExp: 37.373<br />pop: 372000000<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":30.907842734596368,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.6025467916035643],"y":[44],"text":"gdpPercap:    400.4486<br />lifeExp: 44.000<br />pop: 556263527<br />continent: Asia","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":37.795275590551185,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.8613963004603242],"y":[72.489999999999995],"text":"gdpPercap:   7267.6884<br />lifeExp: 72.490<br />pop:    147962<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":0.6164137537688118,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.422850010494709],"y":[59.164000000000001],"text":"gdpPercap:   2647.5856<br />lifeExp: 59.164<br />pop:    413834<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":1.0308852084944342,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.2044065593569231],"y":[55.229999999999997],"text":"gdpPercap:   1601.0561<br />lifeExp: 55.230<br />pop:   1282697<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":1.8149274255528676,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.6248018797427801],"y":[65.569999999999993],"text":"gdpPercap:   4215.0417<br />lifeExp: 65.570<br />pop:   1489518<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":1.955780455187847,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2.9883507643539309],"y":[53.82],"text":"gdpPercap:    973.5332<br />lifeExp: 53.820<br />pop:   2791000<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":2.6771773503857945,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.7168610902147554],"y":[66.909999999999997],"text":"gdpPercap:   5210.2803<br />lifeExp: 66.910<br />pop:   2952156<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":2.7533845769622536,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4.0041244656118469],"y":[72.670000000000002],"text":"gdpPercap:  10095.4217<br />lifeExp: 72.670<br />pop:   3327728<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":2.9232848398822697,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.7054068733390868],"y":[64.359999999999999],"text":"gdpPercap:   5074.6591<br />lifeExp: 64.360<br />pop:   3558137<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":3.0227940366853359,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4940483069265413],"y":[61.210000000000001],"text":"gdpPercap:   3119.2365<br />lifeExp: 61.210<br />pop:   3882229<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":3.1574595719776357,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.8078406226448371],"y":[66.549999999999997],"text":"gdpPercap:   6424.5191<br />lifeExp: 66.550<br />pop:   4090500<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":3.2410476967552473,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.9864306677903336],"y":[70.780000000000001],"text":"gdpPercap:   9692.3852<br />lifeExp: 70.780<br />pop:   4334000<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":3.3361201041816733,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4.1683275259262418],"y":[69.620000000000005],"text":"gdpPercap:  14734.2327<br />lifeExp: 69.620<br />pop:   4815000<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":3.5163765048089739,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5540600381109928],"y":[57.996000000000002],"text":"gdpPercap:   3581.4594<br />lifeExp: 57.996<br />pop:   6860147<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":4.1972412732939244,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.7879615363271912],"y":[66.799999999999997],"text":"gdpPercap:   6137.0765<br />lifeExp: 66.800<br />pop:   6927772<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":4.2178780302001657,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.930839280912017],"y":[71.859999999999999],"text":"gdpPercap:   8527.8447<br />lifeExp: 71.860<br />pop:   7124673<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":4.2773982956990588,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.3881521354267963],"y":[59.600000000000001],"text":"gdpPercap:   2444.2866<br />lifeExp: 59.600<br />pop:   7274900<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":4.3222585077975229,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5478595957564281],"y":[65.859999999999999],"text":"gdpPercap:   3530.6901<br />lifeExp: 65.860<br />pop:   7733250<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":4.4563392890174578,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4869006320800371],"y":[59.82],"text":"gdpPercap:   3068.3199<br />lifeExp: 59.820<br />pop:   8526050<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":4.67919518495352,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.9213277159305022],"y":[68],"text":"gdpPercap:   8343.1051<br />lifeExp: 68.000<br />pop:   8730405<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":4.7349393373198545,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.8373447262436224],"y":[66.870000000000005],"text":"gdpPercap:   6876.1403<br />lifeExp: 66.870<br />pop:   9125183<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":4.8408097563948651,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.7212889686947199],"y":[64.030000000000001],"text":"gdpPercap:   5263.6738<br />lifeExp: 64.030<br />pop:   9504000<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":4.9402671864050385,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.951413871061022],"y":[72.129999999999995],"text":"gdpPercap:   8941.5719<br />lifeExp: 72.130<br />pop:  10381988<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":5.1634203866386787,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.4975672311747799],"y":[61.049999999999997],"text":"gdpPercap:   3144.6132<br />lifeExp: 61.050<br />pop:  16630000<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":6.5349662420424046,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.2942679883231207],"y":[43.585000000000001],"text":"gdpPercap:   1969.1010<br />lifeExp: 43.585<br />pop:  22235677<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":7.5565298498341473,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.6052328048910161],"y":[61.310000000000002],"text":"gdpPercap:   4029.3297<br />lifeExp: 61.310<br />pop:  25730551<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":8.128712566544996,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.5836560439073355],"y":[64.939999999999998],"text":"gdpPercap:   3834.0347<br />lifeExp: 64.940<br />pop:  28549870<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":8.5624745051414237,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.846943545595249],"y":[67.409999999999997],"text":"gdpPercap:   7029.8093<br />lifeExp: 67.410<br />pop:  42459667<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":10.442043924782768,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.6929705967500874],"y":[65.939999999999998],"text":"gdpPercap:   4931.4042<br />lifeExp: 65.940<br />pop:  47666000<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":11.063730242184116,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.9991091518444533],"y":[69.180000000000007],"text":"gdpPercap:   9979.5085<br />lifeExp: 69.180<br />pop:  50430000<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":11.379985480153646,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3.8539483999469684],"y":[67.5],"text":"gdpPercap:   7144.1144<br />lifeExp: 67.500<br />pop:  69145952<br />continent: Europe","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":13.325410725297569,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4.0235230646803348],"y":[69.390000000000001],"text":"gdpPercap:  10556.5757<br />lifeExp: 69.390<br />pop:   1994794<br />continent: Oceania","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","opacity":1,"size":2.2633215080674307,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(231,107,243,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4.0017162212897617],"y":[69.120000000000005],"text":"gdpPercap:  10039.5956<br />lifeExp: 69.120<br />pop:   8691212<br />continent: Oceania","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","opacity":1,"size":4.724299211161946,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(231,107,243,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":40.840182648401829,"r":7.3059360730593621,"b":37.260273972602747,"l":37.260273972602747},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"1952","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2.3474722145117179,5.1629341159628712],"tickmode":"array","ticktext":["1e+03","1e+04","1e+05"],"tickvals":[3,4,5],"categoryorder":"array","categoryarray":["1e+03","1e+04","1e+05"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716894984},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"log10(GDP per capita)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[26.60755,74.86345],"tickmode":"array","ticktext":["30","40","50","60","70"],"tickvals":[30,40,50,60,70],"categoryorder":"array","categoryarray":["30","40","50","60","70"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716894984},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Life expectancy at birth (years)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176002,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716894984},"title":{"text":"Continent","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","width":420,"height":420,"barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"dc6d209c36ad":{"x":{},"y":{},"size":{},"colour":{},"type":"scatter"}},"cur_data":"dc6d209c36ad","visdat":{"dc6d209c36ad":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="panel panel-default">
<div class="panel-heading panel-heading2">
Note
</div>
<div class="panel-body">
<code>plotly</code> is much more flexible than just converting <code>ggplot2</code> figures, and is not restricted to R (you can also use it as a standalone package, or through e.g. Python, Julia or MatLab as well)—see <a href="https://plotly.com/graphing-libraries/">https://plotly.com/graphing-libraries/</a> for more details. It is also being actively developed, which is why it still has a few teething problems, such as an inability to handle multiple legends currently, which is why I had to turn the <code>size</code> legend off using the function <code>guides(size = "none")</code> in the above code. Hopefully future updates will fix this, but it gives you an idea about what’s possible.
</div>
</div>
<p>Another awesome package is <a href="https://shiny.rstudio.com/"><code>shiny</code></a>, which enables you to create <strong>interactive webpages</strong> directly from R. We will not cover <code>shiny</code> in this module, but please take a look at the <a href="https://shiny.rstudio.com/gallery/">gallery</a> for lots of ideas and examples in case you are interested.</p>

</div>
</div>







<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>We will see <code>tibble</code> objects later on—just think of them as special <code>data.frames</code>.<a href="advis.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>just think of this as a smoothed line-of-best-fit through the data for the time being<a href="advis.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
